<div class="row subHeader">
    <div class="currentApp">
       <div class="btn-group">
           <a class="filterItem" href="#" data-toggle="dropdown" >
            {{_(active_app.label)}}
            <i class="icon-angle-down"></i>
           </a>
           <ul class="dropdown-menu">
            {%for application in apps %}

                  <li><a href="/apps/{{ application.key.id() }}" data-toggle="modal">{{_(application.label)}}</a></li>

            {%endfor%}
           </ul>
        </div>
    </div>
  <div class=" subHeaderContent">
    <h2 class="page-title">
      <a href="/#/contacts/" data-toggle="tooltip" id='testEdit' data-placement="bottom" title="{{ _("Back to Contacts") }}">
        <img onload="this.__gwtLastUnhandledEvent=&quot;load&quot;;" src="/static/img/clear.cache.gif" style="width: 21px; height: 21px; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAP0lEQVR42mNgGAXDApRT28AGIP5PCwP/08LA/9QKw/9kYLyggxaGYjMYHyApiBpoYSixSYqsyGwYzf+jgDQAAJylMNOnx10yAAAAAElFTkSuQmCC); background-position: 0px 0px; background-repeat: no-repeat no-repeat;" border="0" class="gwt-Image GI4HA0EPK cbarOpacity" aria-hidden="false">
      </a>
      {{ _("Contacts") }} >
      <a editable-text="contact.firstname"  onbeforesave="inlinePatch('Contact','', 'firstname',contact.entityKey,$data)">
        <%= contact.firstname %>
      </a>
      <a editable-text="contact.lastname"  onbeforesave="inlinePatch('Contact','', 'lastname',contact.entityKey,$data)">
        <%= contact.lastname %>
      </a>
    </h2>
  </div>
</div>
<div  class="page-content">
  <div class="loader-container row" ng-show="isLoading">
    <div class="loader-dialog col-md-4 col-md-offset-4 ">
      <div class="loader-content">
        {{ _('Loading...')}}
      </div>
    </div>
  </div>
  <div class="container" ng-show="immediateFailed">
    <div class="col-md-12">

      <span id="signin">
        <span id="myGsignin"></span>
      </span>
    </div>
  </div>
  <div class="row">
    <div class="col-md-9">
      <div class="row">
        <div class="showPage custom-show margin-bottom-15  col-md-12">
          <div class="row margin-bottom-10">
            <div class="col-md-2" ng-mouseenter="showUpload= true" ng-mouseleave="showUpload = false">
              <div class="pic">
                  <img alt="<%=contact.firstname%> <%=contact.lastname%>" ng-src="<%=imageSrc%>" class="img-responsive profile-photo-large" >
                  <a ng-show="showUpload" ng-click="createLogoPickerUploader()" href="" class="btn-on-show btn-upload btn-upload-contact" data-toggle="modal" style="display: none;">
                 <img src="/static/img/upload_logo.png">
               </a>
               <div ng-show="showUpload" class="responsivePhotoIcon"></div>
               </div>
            </div>
            <div class="col-md-10">
              <div class="row">
                <div class="col-md-12">
                  <span class="page-meta pull-right">
                    <i class="icon-pencil">
                      <a ng-click="editacontact()" class="btn-link addAnotherPhone" data-toggle="modal">
                        {{ _('Edit')}}
                      </a>
                    </i>
                     |
                    <i class="icon-trash">
                      <a ng-click="editbeforedelete(contact,'contact')" class="btn-link addAnotherPhone">  Delete
                      </a>
                    </i>
                  </span>
                  <ul class="list-unstyled contactInfos">
                    <li ng-show=" contact.title" >
                      <span>
                        {{ _('Title:')}}
                        <a class="tag ng-binding" href="/#/search/type:Contact #<%= contact.title %>">
                          #<%= contact.title %>
                        </a>
                      </span>
                    </li>
                    <li ng-show="contact.account">
                      <span>

                        {{ _('Company:')}}
                        <a class="tag ng-binding" href="/#/search/type:Contact  #<%= contact.account.name %>">

                          #<%= contact.account.name %>
                        </a>
                      </span>
                    </li>
                    <li class="hangout-item">                        
                      <span>
                         {{ _('Owner:')}}
                        <a class="tag ng-binding" href="/#/search/type:Contact owner:<%= contact.owner.google_user_id %>">
                          #<%= contact.owner.google_display_name %>
                        </a>
                      </span>
                    </li>
                    <li>
                      <span class="contact-title" >{{ _('Last updated:')}}  <%=fromNow(contact.updated_at)%> </span>
                    </li>
                    <li>
                        <br>
                        <div id="placeholder-div1" class="pull-right hangout-btn"></div>
                        <div class="pull-right sharebuttonDiv">
                            <a href="#sharingSettingsModal" class="btn blue btn-sm jfk-button jfk-button-action" data-toggle="modal">
                              <i class="icon-share"></i>
                              Share
                            </a>
                        </div>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <hr class="sm-hr">
                  <div class="relatedTags tags-section">
                        <div class="section-content">
                            <span class="pull-left"><i class="fa fa-tags"></i>{{_('Tags')}}: </span>
                            <!-- ngRepeat: tag in account.tags -->
                            <div ng-repeat="tag in contact.tags">
                                <span class="pull-left task-label task-tag badge ng-scope ng-binding" style="background-color: <%=tag.color%>;color:<%=idealTextColor(tag.color)%>;">
                                    <a href="" ng-click="removeTag(tag,$index)" class="removeRelatedTag select2-search-choice-close" ></a>
                                    <%= tag.name %>
                                </span>
                            </div>
                           <a href="" ng-hide="showNewTag" ng-click="showNewTag=true" style="margin-left:10px"> +Add new tag</a>
                           <form ng-show="showNewTag" class="newTagFormShow">
                                <select id="select2_sample2" class="selectTagInput form-control select2" multiple>
                                  <option ng-repeat="tag in tags"
                                  value='<%=tag.entityKey%>'>
                                    <%=tag.name%>
                                  </option>
                                </select>
                                <button type="submit"  ng-click="addTagsTothis();showNewTag=false" class="btn blue jfk-button btn-sm jfk-button-action">{{_('Add')}}</button>
                            </form>
                        </div>
                    </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="tabbable tabbable-custom">
                <ul class="nav nav-tabs">
                  <li class="ng-tab" ng-class="{active: selectedTab == 2}">
                    <a ng-click="selectedTab = 2;renderMaps();">{{_('About')}}</a>
                  </li>
                  <li class="ng-tab" ng-class="{active: selectedTab == 1}">
                    <a ng-click="selectedTab = 1;">{{ _('Notes')}}</a>
                  </li>
                  <li class="ng-tab sm-menu" ng-class="{active: selectedTab ==8}">
                    <a ng-click="selectedTab = 8;sendEmailSelected();">{{ _('Send an Email')}}</a>
                  </li>
                  <!--li class="ng-tab sm-menu" ng-class="{active: selectedTab == 3}">
                    <a ng-click="waterfall(); selectedTab = 3;">Contacts</a>
                  </li-->
                  <li class="ng-tab sm-menu" ng-class="{active: selectedTab == 7}">
                    <a ng-click="waterfallTrigger();selectedTab = 7;">{{ _('Attach Documents')}}</a>
                  </li>
                  <!-- <li class="ng-tab md-menu" ng-class="{active: selectedTab == 4}">
                    <a ng-click="selectedTab = 4;">Needs</a>
                  </li> -->
                  <li class="ng-tab md-menu" ng-class="{active: selectedTab == 5}">
                    <a ng-click="waterfallTrigger();selectedTab = 5;">{{ _('Opportunities')}}</a>
                  </li>
                  <li class="ng-tab md-menu" ng-class="{active: selectedTab == 6}">
                    <a ng-click="waterfallTrigger();selectedTab = 6;">{{ _('Cases')}}</a>
                  </li>
                  <li class="ng-tab md-menu" ng-class="{active: selectedTab == 9, forceHide: noDetails()}">
                    <a ng-click="waterfallTrigger();selectedTab = 9;">{{_('Details of Contact')}}</a>
                  </li>

                  <li class="dropdown md-menu-inv">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                      More <i class="fa fa-angle-down"></i>
                    </a>
                    <ul class="dropdown-menu" role="menu">
                      <li class="ng-tab sm-menu-inv" ng-class="{active: selectedTab ==8}"><a ng-click="selectedTab = 8;">{{ _('Send an Email')}}</a></li>
                      <li class="ng-tab sm-menu-inv" ng-class="{active: selectedTab == 3}"><a ng-click="selectedTab = 3;">{{ _('Contacts')}}</a></li>
                      <li class="ng-tab sm-menu-inv" ng-class="{active: selectedTab == 7}"><a ng-click="selectedTab = 7;">{{ _('Attach Documents')}}</a>
                      <li class="ng-tab md-menu-inv" ng-class="{active: selectedTab == 4}"><a ng-click="selectedTab = 4;">{{ _('Needs')}}</a></li>
                      {% if is_business_user %}
                      <li class="ng-tab md-menu-inv" ng-class="{active: selectedTab == 5}"><a ng-click="waterfallTrigger(); selectedTab = 5;">{{ _('Opportunities')}}</a></li>
                      <li class="ng-tab md-menu-inv" ng-class="{active: selectedTab == 6}"><a ng-click="waterfallTrigger(); selectedTab = 6;">{{ _('Cases')}}</a></li>  
                      <li ng-hide="noDetails()" class="ng-tab md-menu-inv" ng-class="{active: selectedTab == 9}"><a ng-click="waterfallTrigger(); selectedTab = 9;">{{_('Details of Contact')}}</a></li>
                    
                      {%endif%}

                    </ul>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <!-- END PAGE HEADER-->
        <!-- BEGIN PAGE CONTENT-->
        <div class="col-md-12">
          <div class="row">
            <div class="">
              <!-- $ tabs -->
              <div class="tab-content">
                <!-- $ notes tab -->
                <div class="tab-pane active" id="tab_1_1" ng-show="selectedTab == 1">
                  <div class="showPage">
                    <div class="row">
                      <div class="col-md-12  margin-bottom-10">
                        <p class⁼"lead"="">
                          {{ _('To add an outside email to this account, forward or BCC to:')}}
                          <a href="mailto:111054727630979006769@gcdc2013-iogrow.appspotmail.com">
                            111054727630979006769@gcdc2013-iogrow.appspotmail.com
                          </a>
                          <br>
                          {{ _('Or just add notes to remember what\'s important.')}}
                          <br>
                        </p>

                        <form id="addNote"  class="ng-pristine ng-valid">
                          <div class="form-group">

                            <input class="form-control ng-pristine ng-valid" autofocus="" type="text" placeholder="{{ _('Add a new subject')}}" id="messageSubject" ng-model="note.title">
                          </div>
                          <div class="form-group">
                            <textarea id="noteBody" class="form-control ng-pristine ng-valid" rows="3" ng-model="note.content"></textarea>
                          </div>
                          <div class="pull-right">
                            <input ng-disabled="isLoading || !note.title" ng-click="addNote(note)" type="submit" class="btn green" value="{{_('Add this note')}}">
                          </div>
                        </form>
                      </div>
                    </div>
                    <ul class="chats">
                      <li class="in" ng-repeat="topic in topics" id="topic_<%=$index%>">
                        <img class="avatar" alt="" ng-src="<%= topic.last_updater.photo%>" />
                        <div class="message">
                          <span class="arrow"></span>
                          <a href="#" class="name">
                            <%= topic.last_updater.display_name%>
                          </a>
                          <span class="datetime">
                            at <%=topic.updated_at | date:'yyyy-MM-dd - HH:mm:ss '  %>
                          </span>
                          <span class="body">
                            <a href="<%=getTopicUrl(topic.topic_kind,topic.id)%>" class="discussion-content"><strong class="ng-binding">
                              <%= topic.title%></strong> - <span class="excerpt ng-binding" ng-bind-html-unsafe="topic.excerpt"></span><span class="chat-meta pull-right" ng-show="topic.comments"><i class="icon-comment"></i> <%= topic.comments%> comments</span>
                            </a>
                          </span>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
                <!-- $ about tab -->
                <div class="tab-pane active" id="tab_1_2" ng-show="selectedTab == 2">
                  <div class="row slimForm">
                    <div class="col-md-6">
                      <div class="news-blocks blank-card blank-card-yellow newsCard">
                        <h3>{{ _('Contact Informations')}}</h3>
                        <div class="news-block-tags">
                          <strong>{{ _('Phone')}}</strong>
                        </div>
                        <ul class="list-unstyled contact-infos">
                          <li ng-show="showPhoneForm">
                                      <div class="row">
                                         <form name="phoneform" class="form-inline newLeadForm" role="form">
                                          <div class="form-group sm-group" style="">
                                            <label class="sr-only" for="exampleInputPassword2">{{ _('Type')}}</label>
                                            <select ng-model="phone.type" class="form-control">
                                              <option value="home" selected="selected" >{{_('home')}}</option>
                                              <option>{{_('work')}}</option>
                                              <option>{{_('mobile')}}</option>
                                              <option>{{_('other')}}</option>
                                            </select>
                                          </div>
                                          <div class="form-group sm-group" style="">
                                            <label class="sr-only" for="exampleInputEmail2">{{ _('Number')}}</label>
                                            <input
                                                name="phonenumber"
                                                type="text"
                                                class="form-control"
                                                id="exampleInputEmail2"
                                                ng-model="phone.number"
                                                placeholder="{{ _('Enter a number')}}"
                                                required
                                                ng-pattern="/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/i"
                                                ng-focus="isFocused=true">
                                               <!--  <span class="error" ng-show="phoneform.phonenumber.$error.required">
                                                    Required!
                                                </span>
                                                    <span class="error" ng-show="phoneform.phonenumber.$error.pattern">
                                                  Not valid!
                                                </span> -->
                                          </div>
                                           <button type="submit" ng-click="addPhone(phone)" class="btn blue jfk-button jfk-button-action">{{ _('Add')}}</button>
                                            <button type="submit" class="btn btn-default" ng-click="showPhoneForm=false">X</button>
                                        </form>
                                      </div>
                            </li>
                          <li ng-repeat="phone in infonodes.phones"> <a editable-text="phone.number"  editable-text="phone.number" editoptions editdataattr="deleteInfonode('<%=phone.entityKey%>','phones')" onbeforesave="inlinePatch('Infonode','phones', 'number',phone.entityKey,$data)"> <%=phone.number%> </a> - <a editable-select="phone.type" e-ng-options="s.value as s.text for s in statuses" onbeforesave="inlinePatch('Infonode','phones', 'type',phone.entityKey,$data)"> <%=phone.type%> </a> <a ><img class="ctodeal"  /></a></li>
                           <li>
                           <a ng-hide="showPhoneForm" ng-click="showPhoneForm=true" class="btn-link addAnotherPhone" ><i class="icon-plus"></i>{{ _('Add a new Phone')}}</a>
                           </li>

                        </ul>
                        <div class="news-block-tags">
                          <strong>{{ _('Email')}}</strong>
                        </div>
                        <ul class="list-unstyled contact-infos">
                          <li ng-show="showEmailForm">
                                        <div class="row">
                                          <form class="form-inline newLeadForm" role="form">
                                            <div class="form-group lg-group" style="">
                                              <label class="sr-only" for="exampleInputEmail2">{{ _('Email')}}</label>
                                              <input type="email" class="form-control" id="exampleInputEmail2" ng-model="email.email" placeholder="{{ _('Enter an email')}}">
                                            </div>
                                             <button type="submit" class="btn blue jfk-button jfk-button-action" ng-click="addEmail(email)" >{{ _('Add')}}</button>
                                              <button type="submit" ng-click="showEmailForm=false" class="btn btn-default">X</button>
                                          </form>
                                        </div>
                          </li>
                        <li ng-repeat="email in infonodes.emails"> <a editable-text="email.email" editoptions editdataattr="deleteInfonode('<%=email.entityKey%>','emails')" onbeforesave="inlinePatch('Infonode','emails', 'email',email.entityKey,$data)"> <%=email.email %>  </a> </li>
                          <li><a class="btn-link addAnotherPhone" ng-hide="showEmailForm" ng-click="showEmailForm=true"><i class="icon-plus"></i> {{ _('Add a new email address')}} </a>
                          </li>

                        </ul>
                        <div class="news-block-tags">
                          <strong>{{ _('Address')}}</strong>
                        </div>
                        <ul class="list-unstyled contact-infos">
                           <li ng-repeat="address in infonodes.addresses">- <span editoptions editdataattr="deleteInfonode('<%=address.entityKey%>','addresses')" editable-text="address.street" onbeforesave="inlinePatch('Infonode','addresses', 'street',address.entityKey,$data)" ng-show="address.street"><%=address.street%>, </span> <span editable-text="address.city" onbeforesave="inlinePatch('Infonode','addresses', 'city',address.entityKey,$data)" ng-show="address.city"><%=address.city%>, </span><span editable-text="address.state" onbeforesave="inlinePatch('Infonode','addresses', 'state',address.entityKey,$data)" ng-show="address.state"><%=address.state%>, </span> <span editable-text="address.country" onbeforesave="inlinePatch('Infonode','addresses', 'country',address.entityKey,$data)" ng-show="address.country"><%=address.country%></span></li>
                          <li>
                            <a href="#addressmodal" class="btn-link addAnotherPhone" data-toggle="modal"><i class="icon-plus"></i> {{ _('Add a new address')}} </a>
                          </li>

                        </ul>
                      </div>
                      <div class="news-blocks blank-card blank-card-bluep newsCard">
                        <h3>{{ _('Links')}}</h3>
                        <div class="news-block-tags">
                          <strong>{{ _('Website')}}</strong>
                        </div>
                        <ul class="list-unstyled contact-infos">
                          <li ng-show="showWebsiteForm">
                                      <div class="row">
                                        <form class="form-inline newLeadForm" role="form">
                                          <div class="form-group lg-group" style="">
                                            <label class="sr-only" for="exampleInputEmail2">{{ _('Website')}}</label>
                                            <input
                                              type="url"
                                              ng-model="website.url"
                                              class="form-control"
                                              id="exampleInputEmail2"
                                              placeholder="{{ _('Enter a Website')}}"
                                              required>
                                          </div>
                                      <button type="submit" ng-click="addWebsite(website)" class="btn blue jfk-button jfk-button-action">{{ _('Add')}}</button>
                                      <button type="submit" ng-click="showWebsiteForm=false" class="btn btn-default">X</button>
                                        </form>
                                      </div>
                            </li>
                          <li  ng-repeat="website in infonodes.websites"><a editable-text="website.url" onbeforesave="inlinePatch('Infonode','websites', 'url',website.entityKey,$data)" href="<%=website.url%>"  target="_blank" editoptions editdataattr="deleteInfonode('<%=website.entityKey%>','websites')"><%=website.url%></a> 
                            <a href="<%=website.url%>" target="new" class="icon-link" ></a>

                          </li>
                          <li>
                            <a  ng-hide="showWebsiteForm" ng-click="showWebsiteForm=true" class="btn-link addAnotherPhone" data-toggle="modal"><i class="icon-plus"></i> {{ _('Add a new Website')}} </a>
                          </li>
                        </ul>
                        <div class="news-block-tags">
                          <strong>{{ _('Social Links')}}</strong>
                        </div>
                        <ul class="list-unstyled contact-infos">
                          <li ng-show="showSociallinkForm">
                                          <div class="row">
                                            <form class="form-inline newLeadForm" role="form">
                                              <div class="form-group lg-group" style="">
                                                <label class="sr-only" for="exampleInputEmail2">{{ _('Social link')}}</label>
                                                <input
                                                  name="social"
                                                  type="url"
                                                  class="form-control"
                                                  id="exampleInputEmail2"
                                                  ng-model='sociallink.url'
                                                  placeholder="{{ _('Enter a social link')}}"
                                                  required>
                                              </div>
                                               <button
                                                  ng-click="addSocial(sociallink)" type="submit" class="btn blue jfk-button jfk-button-action">{{ _('Add')}}</button>
                                                <button type="submit" ng-click="showSociallinkForm=false" class="btn btn-default">X</button>
                                            </form>
                                          </div>
                            </li>
                          <li ng-repeat="sociallink in infonodes.sociallinks"><a editable-text="sociallink.url" onbeforesave="inlinePatch('Infonode','sociallinks', 'url',sociallink.entityKey,$data)" href="<%=sociallink.url%>" editoptions editdataattr="deleteInfonode('<%=sociallink.entityKey%>','sociallinks')"  target="_blank"> <%=sociallink.url%> </a>
                            <a href="<%=sociallink.url%>" target="new" class="icon-link" ></a>
                          </li>
                          <li>
                             <a class="btn-link addAnotherPhone" ng-hide="showSociallinkForm" ng-click="showSociallinkForm=true"><i class="icon-plus"></i> {{ _('Add a new social links')}} </a>
                          </li>
                        </ul>
                      </div>
                      <div class="news-blocks blank-card blank-card-yellow newsCard">
                        <h3>{{ _('Custom Fields')}}</h3>
                        <ul class="list-unstyled contact-infos">
                          <li ng-show="showCustomFieldForm">
                                          <div class="row">
                                            <form class="form-inline newLeadForm" role="form">
                                              <div class="form-group sm-group" style="">
                                                <label class="sr-only" for="exampleInputEmail2">{{ _('Field')}}</label>
                                                <input
                                                  type="text"
                                                  class="form-control"
                                                  id="exampleInputEmail2"
                                                  ng-model="customfield.field" placeholder="{{ _('Enter field name')}}"
                                                  required>
                                              </div>
                                              <div class="form-group sm-group" style="">
                                                <label class="sr-only" for="exampleInputEmail2">{{ _('Value')}}</label>
                                                <input
                                                  type="text"
                                                  class="form-control"
                                                  id="exampleInputEmail2"
                                                  ng-model="customfield.value" placeholder="{{ _('Enter a value')}}"
                                                  required>
                                              </div>
                                               <button type="submit" class="btn blue jfk-button jfk-button-action" ng-click="addCustomField(customfield)">{{ _('Add')}}</button>
                                                <button type="submit" class="btn btn-default" ng-click="showCustomFieldForm=false">X</button>
                                            </form>
                                          </div>
                            </li>
                          <li ng-repeat="custom in infonodes.customfields">
                              <span editoptions editdataattr="deleteInfonode('<%=custom.entityKey%>','customfields')"   >
                                    <%= custom.fields[0].field%>  :
                              </span>

                              <span editable-text="custom.fields[0].value" onbeforesave="inlinePatch('Infonode','customfields', '<%= custom.fields[0].field%>',custom.entityKey,$data)" >   <%= custom.fields[0].value%>
                              </span>

                          </li>
                          <li>
                            <a ng-click="showCustomFieldForm=true" ng-hide="showCustomFieldForm"class="btn-link addAnotherPhone" data-toggle="modal"><i class="icon-plus"></i> {{ _('Add a new custom field')}} </a>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="right-col">
                        <div class="news-blocks blank-card blank-card-red newsCard">
                          <h3>{{ _('Story')}}</h3>
                          <div class="news-block-tags">

                         <div class="form-group row">
                            <label class="control-label col-md-4">{{ _('Tagline')}}</label>
                             <div class="col-md-8">
                                 <input ng-blur="updateContactIntroTagline({'id':contact.id,'tagline':contact.tagline})" type="text" required id="id_tagline" class="form-control" ng-model="contact.tagline">
                             </div>
                          </div>
                           </div>

                          <div class="news-block-tags">

                            <div class="form-group row">
                               <label class="control-label col-md-4">{{ _('Introduction')}}</label>
                             <div class="col-md-8">
                               <textarea id="noteBody" ng-blur="updateContactIntroTagline({'id':contact.id,'introduction':contact.introduction})" class="form-control ng-pristine ng-valid" rows="3" ng-model="contact.introduction"></textarea>
                              </div>
                              </div>
                           </div>

                        </div>
                        <div class="news-blocks blank-card blank-card-yellow newsCard">
                          <div id="gmap_canvas" style="width:100%;height:300px;"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- $ contacts tab -->
                <div class="tab-pane active" id="tab_1_3" ng-show="selectedTab == 3" style="display: none;">
                  <div class="row cards-container">
                    <div class="btn-group relbutton">
                      <button ng-click="addContactModal()" id="sample_editable_1_new" class="btn red">
                        {{ _('Add person')}}
                      </button>
                    </div>
                    <div class="col-md-12">
                            <div class="row">
                              <div class="col-md-12 waterfall" ng-hide="blankStateaccount">
                                <div droppable  ng-repeat="contact in contacts" data-column="<%=getPosition($index)%>" class="cardElement" ng-drop="dropTag(contact)" ng-class="{rightcards: getPosition($index)==4}">
                                    <div class="detailsSection">
                                      <div class="head">
                                        <div class="pic">
                                            <a href="/#/contact/show/<%= contact.id %>" class="startup-link" title="contact.firstname"><img ng-hide="account.logo_img_id" alt="contact.firstname" class="img-responsive img-thumbnail" src="/static/img/default_company.png" >
                                            <img ng-show="account.logo_img_id" alt="account.name" class="img-responsive img-thumbnail" ng-src="https://docs.google.com/uc?id=<%= account.logo_img_id %>" data-hasqtip="2">
                                            </a>
                                        </div>
                                        <div class="text">
                                            <div class="name"><a href="/#/contact/show/<%= contact.id %>" class="profile-link" data-id="126085" data-type="Startup"><%= contact.firstname %> <%= contact.lastname %></a></div>
                                             <div class="pitch">
                                                <span  ng-show="contact.account_type">
                                                  <a href="/#/search/type:contact <%=contact.title%>"> #<%= contact.title %></a>
                                                </span>
                                              </div>
                                        </div>
                                        <div class="clearfix"></div>
                                      </div>
                                    </div>
                                    <div class="tagsSection" ng-class="{hidden: contact.tags==null}">
                                        <div class="sectionContent">
                                             <a ng-repeat="tag in contact.tags" href="/#/search/type:contact tags:<%=tag.id%>"> <span class="pull-right task-label task-tag badge ng-scope ng-binding" style="background-color: <%=tag.color%>;color:<%=idealTextColor(tag.color)%>;">  <%= tag.name %></span>
                                             </a>
                                        </div>
                                    </div>
                            </div>
                             <!--blank stat-->
                            <div ng-show="blankStateaccount" data-span="3" class="col-md-12 responsive" data-tablet="span6" data-desktop="span12">
                              <div class="dashboard-stat cards">
                                <div class="blank_slate_arrow"></div>
                                <div class="thumbnail blank_slate_body">
                                    <img class="img-responsive" src="/static/img/accounts_blank.png">
                                    <p class="lead">{{ _('Accounts  pages includes a detailed page for each customer, partner, or investor in your ecosystem. You and your co-workers can collaborate to get a deep understanding.') }}</p>
                                </div>
                              </div>
                            </div>
                            <div ng-show="isFiltering * !accounts" data-span="3" class="col-md-12 responsive" data-tablet="span6" data-desktop="span12">
                              <div class="dashboard-stat cards" >
                                <div class="blank_slate_arrow"></div>
                                    <div class="thumbnail blank_slate_body">

                                        <p class="lead">{{ _('No results found, try with another filter') }}</p>
                                    </div>
                              </div>
                            </div>
                            <div class="clearfix"></div>

                            </div><!--/inner-cards-container-->
                              </div><!--/inner-cards-container-->
                              </div>
                            </div>


                      </div>
                <!-- $ needs tab -->
                <div class="tab-pane active" id="tab_1_4" ng-show="selectedTab == 4" style="display: none;">
                  <div class="row cards-container">
                    <div class="btn-group relbutton">
                                <button ng-click="addNeedModal()" id="sample_editable_1_new" class="btn red">
                               {{ _('Add Need')}}
                                </button>
                    </div>
                    <div class="col-md-12">
                      <div class="row">
                        <div ng-show="blankStateneeds" class="col-md-12 responsive" data-tablet="span6" data-desktop="span12" style="">
                          <div class="dashboard-stat cards">
                            <div class="blank_slate_arrow"></div>
                            <div class=" thumbnail blank_slate_body">
                              <img class="img-responsive" src="/static/img/cases_blank.png">
                              <p class="lead">{{ _('Let your customers explain their needs, and after you can validate or reject those needs (Lean Development).')}}</p>
                            </div>
                          </div>
                        </div>
                        <br>
                        <div class="clearfix"></div>
                      </div><!--/inner-cards-container-->
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-12">
                      <div class="pagination pull-right" ng-hide="isLoading">
                        <button ng-click="NeedPrevPageItems()" id="sample_editable_1_new" class="btn" ng-show="needspagination.prev" style="display: none;">
                          {{ _('Prev')}}
                        </button>
                        <button ng-click="NeedlistNextPageItems()" class="btn" ng-show="needspagination.next" style="display: none;">
                          {{ _('Next')}}
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- $ opportunities tab -->
                <div class="tab-pane active" id="tab_1_5" ng-show="selectedTab == 5" style="display: none;">

                         <div class="row cards-container">

                         <div class="btn-group relbutton">
                                <button ng-click="showNewOpp=true" ng-hide="showNewOpp" id="sample_editable_1_new" class="btn red">
                                {{ _('Add opportunity')}}
                                </button>
                          </div>
                          <div class="col-md-12" ng-show="showNewOpp">
                            <div class="relatedNewForm">
                                <div class="showPage col-md-12 newActionsBtn">
                                <span>{{ _("Create Opportunity")}} </span>
                            <button class="btn btn-sm  red newAccountBtn pull-right" ng-click="saveOpp(opportunity)">{{ _("Create")}}</button>
                             <button class="btn btn-sm btn-default newAccountBtn pull-right closeBtn" ng-click="hideNewOppForm()">{{ _("Close")}}</button>
                                <div class="clearfix"></div>
                              </div>
                             <div class="showPage slimForm col-md-12 margin-bottom-15">
                                  <div class="row">
                                  <div class="col-md-12">
                                  <div class="row">
                                    <div class="col-md-12">
                                    <!-- BEGIN PORTLET-->
                                    <form class="form-horizontal ">
                                  <div class="row">
                                    <div class="col-md-12">
                                      <div class="form-group">
                                        <div class="col-md-12">
                                          <input autofocus ng-model="opportunity.name" placeholder="{{_('Type here the opportunity name...')}}" type="text" class="form-control">
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                    <!-- BEGIN PORTLET-->
                                    <form class="form-horizontal ">

                                    <div class="row">
                                        <div class="col-md-6">
                                              <div class="row">
                                                <div class="col-md-12">
                                                  <div class="form-group">
                                                    <div class="col-md-7 sm-margin-bottom-15">
                                                        <input type="text" required id="id_name" class="form-control" placeholder="{{_('Opportunity amount...')}}" ng-model="opportunity.amount_per_unit ">
                                                     </div>
                                                    <div class="col-md-5 ">
                                                     <select  class="form-control" ng-model="opportunity.currency">
                                                      <option value="USD" selected>$ - USD</option>
                                                      <option value="EUR">€ - EUR</option>
                                                      <option value="CAD">$ - CAD</option>
                                                      <option value="GBP">£ - GBP</option>
                                                      <option value="AUD">$ - AUD</option>
                                                      <option value="">---</option>
                                                      <option value="AED">د.إ - AED</option>
                                                      <option value="ANG">ƒ - ANG</option>
                                                      <option value="AOA">AOA - AOA</option>
                                                      <option value="ARS">$ - ARS</option>
                                                      <option value="BAM">KM - BAM</option>
                                                      <option value="BBD">$ - BBD</option>
                                                      <option value="BGL">лв - BGL</option>
                                                      <option value="BHD">BD - BHD</option>
                                                      <option value="BND">$ - BND</option>
                                                      <option value="BRL">R$ - BRL</option>
                                                      <option value="BTC">฿ - BTC</option>
                                                      <option value="CHF">Fr - CHF</option>
                                                      <option value="CLF">UF - CLF</option>
                                                      <option value="CLP">$ - CLP</option>
                                                      <option value="CNY">¥ - CNY</option>
                                                      <option value="COP">$ - COP</option>
                                                      <option value="CRC">₡ - CRC</option>
                                                      <option value="CZK">Kč - CZK</option>
                                                      <option value="DKK">kr - DKK</option>
                                                      <option value="EEK">KR - EEK</option>
                                                      <option value="EGP">E£ - EGP</option>
                                                      <option value="FJD">FJ$ - FJD</option>
                                                      <option value="GTQ">Q - GTQ</option>
                                                      <option value="HKD">$ - HKD</option>
                                                      <option value="HRK">kn  - HRK</option>
                                                      <option value="HUF">Ft - HUF</option>
                                                      <option value="IDR">Rp - IDR</option>
                                                      <option value="ILS">₪ - ILS</option>
                                                      <option value="INR">₨ - INR</option>
                                                      <option value="IRR">ریال - IRR</option>
                                                      <option value="ISK">kr - ISK</option>
                                                      <option value="JOD">د.ا - JOD</option>
                                                      <option value="JPY">¥ - JPY</option>
                                                      <option value="KES">KSh - KES</option>
                                                      <option value="KRW">₩ - KRW</option>
                                                      <option value="KWD">KD - KWD</option>
                                                      <option value="KYD">$ - KYD</option>
                                                      <option value="LTL">Lt - LTL</option>
                                                      <option value="LVL">Ls - LVL</option>
                                                      <option value="MAD">د.م. - MAD</option>
                                                      <option value="MVR">Rf - MVR</option>
                                                      <option value="MXN">$ - MXN</option>
                                                      <option value="MYR">RM - MYR</option>
                                                      <option value="NGN">₦ - NGN</option>
                                                      <option value="NOK">kr - NOK</option>
                                                      <option value="NZD">$ - NZD</option>
                                                      <option value="OMR">ر.ع - OMR</option>
                                                      <option value="PEN">S/. - PEN</option>
                                                      <option value="PHP">₱ - PHP</option>
                                                      <option value="PLN">zł - PLN</option>
                                                      <option value="QAR">ر.ق - QAR</option>
                                                      <option value="RON">L - RON</option>
                                                      <option value="RUB">руб. - RUB</option>
                                                      <option value="SAR">ر.س - SAR</option>
                                                      <option value="SEK">kr - SEK</option>
                                                      <option value="SGD">$ - SGD</option>
                                                      <option value="THB">฿ - THB</option>
                                                      <option value="TRY">TL - TRY</option>
                                                      <option value="TTD">$ - TTD</option>
                                                      <option value="TWD">$ - TWD</option>
                                                      <option value="UAH">₴ - UAH</option>
                                                      <option value="VEF">Bs F - VEF</option>
                                                      <option value="VND">₫ - VND</option>
                                                      <option value="XCD">$ - XCD</option>
                                                      <option value="ZAR">R - ZAR</option>
                                                    </select>
                                                    </div>
                                                  </div>
                                                </div>
                                                </div>                                                
                                        </div>

                                        <div class="col-md-6">
                                            <div class="row">
                                                  <div class="col-md-12">
                                                  <div class="form-group">
                                                      <div class="col-md-7 ">
                                                          <select   class="form-control" ng-model="opportunity.duration_unit">
                                                              <option value="fixed">{{ _("Fixed bid")}}</option>
                                                              <option value="hour">{{ _("Per hour")}}</option>
                                                              <option value="month">{{ _("Per month")}}</option>
                                                              <option value="year">{{ _("Per year")}}</option>
                                                          </select>
                                                      </div>
                                                      <div class="col-md-5 ">
                                                         <input ng-hide="opportunity.duration_unit=='fixed'" type="text" pattern="\d*"  required id="" class="form-control" ng-model="opportunity.duration">
                                                      </div>
                                                    </div>
                                                  </div>
                                              </div>
                                        </div>
                                        </div>

                                    </div>
                                    </div>
                                    <div class="row">
                                               <div class="col-md-6">

                                                     <div class="news-blocks blank-card blank-card-yellow">
                                                      <h3>{{ _('Opportunity Stage') }}</h3>
                                                      <div class="row">
                                                        <div class="col-md-12">
                                                          <div class="form-group">

                                                              <div class="">
                                                                <select ng-model="initialStage" ng-options="opps as opps.name + ' - ( ' + opps.probability + '% )'   for opps in opportunitystages track by opps.probability" class="form-control selector-margin" >

                                                                </select>
                                                              </div>
                                                          </div>
                                                        </div>
                                                      </div>
                                                      <div class="row">
                                                        <div class="col-md-12">
                                                          <p>{{ _('Estimated closed date') }}:</p>
                                                          <div class="form-group row">
                                                              <div class="col-md-12">
                                                                  <datetimepick on-change="test()" ng-model='opportunity.closed_date' class="" label-format='EEEE, MMMM d, yyyy'></datetimepick>
                                                              </div>
                                                          </div>
                                                        </div>
                                                      </div>


                                                    </div>
                                                    <div class="news-blocks blank-card blank-card-bluep">
                                                     <h3>{{ _('Custom Fields') }}</h3>

                                                     <ul class="list-unstyled contact-infos" >
                                                         <li ng-show="showCustomFieldForm">
                                                               <div class="row">
                                                                 <form class="form-inline newLeadForm" role="form">
                                                                   <div class="form-group sm-group" style="">
                                                                     <label class="sr-only" for="exampleInputEmail2">{{ _("Field")}}</label>
                                                                     <input type="text" class="form-control" id="exampleInputEmail2" ng-model="customfield.field" placeholder="Enter field name">
                                                                   </div>
                                                                   <div class="form-group sm-group" style="">
                                                                     <label class="sr-only" for="exampleInputEmail2">{{ _("Value")}}</label>
                                                                     <input type="text" class="form-control" id="exampleInputEmail2" ng-model="customfield.value" placeholder="Enter a value">
                                                                   </div>
                                                                    <button type="submit" class="btn blue jfk-button jfk-button-action" ng-click="pushElement(customfield,customfields)">{{ _("Add")}}</button>
                                                                     <button type="submit" class="btn btn-default" ng-click="showCustomFieldForm=false">X</button>
                                                                 </form>
                                                               </div>
                                                         </li>
                                                         <li ng-repeat="custom in customfields" class="newItems"  >
                                                         <span>
                                                         <%= custom.field%>  : <%= custom.value%>
                                                         <a id="custom_<%=$index%>" href="" ng-click="pullElement($index,custom,customfields)" class="removeItem">x</a>
                                                         </span>

                                                         </li>
                                                         <li><a ng-click="showCustomFieldForm=true" ng-hide="showCustomFieldForm"class="btn-link addAnotherPhone" data-toggle="modal"><i class="icon-plus"></i> {{ _("Add a new custom field")}} </a></li>

                                                     </ul>

                                                   </div>


                                                </div>

                                    <div class="col-md-6">
                                        <div class="news-blocks blank-card blank-card-red">
                                          <h3>{{ _("Opportunity Informations")}}</h3>

                                          <div class="news-block-tags">
                                            <div class="form-group row">
                                              <label class="control-label col-md-3">{{ _("Description")}}</label>
                                              <div class="col-md-9">
                                                <textarea id="noteBody" class="form-control ng-pristine ng-valid" rows="3" ng-model="opportunity.description"></textarea>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="news-block-tags">
                                            <div class="form-group row">
                                              <label class="control-label col-md-3">{{ _("Competitors")}}</label>
                                              <div class="col-md-9">
                                                <textarea id="noteBody" class="form-control ng-pristine ng-valid" rows="3" ng-model="opportunity.competitor"></textarea>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                    </div>
                                    </div>

                                  </div>
                                  </div>
                                  </div>
                                  </div>
                             </div>
                          <div class="col-md-12">
                            <div class="row">
                              <!-- ngRepeat: opp in opportunities -->
                            <div class="col-md-12 waterfall3 waterfallDiv" ng-hide="showNewOpp">
                              <div  ng-repeat="opportunity in opportunities" droppable id="card_<%=$index%>"  class=" oppCard cardElement"  ng-drop="dropTag(opportunity,$index)" >
                                <div class="btn-group inCardOptionsBtn">
                                  <button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown">
                                   <i class="fa fa-ellipsis-vertical"></i>
                                  </button>
                                  <ul class="dropdown-menu drp-dwn-right " role="menu">
                                    <li>
                                     <a href="" ng-click="showAssigneeTags(opportunity)">
                                         <i class='fa fa-tags'></i> {{ _("Add tags ")}}</a>
                                    </li>
                                    <li>
                                     <a href="" ng-click="editbeforedelete(opportunity,'opportunity')">
                                         <i class='fa fa-trash-o'></i> {{ _("Delete")}} </a>
                                    </li>
                                  </ul>
                                </div>
                                <div class="detailsSection">
                                        <div class="col-md-4 col-xs-4">
                                          <div class="stage">
                                              <div easypiechart class="chart" options="chartOptions" percent="opportunity.current_stage.probability"></div>
                                              <div class="oppStage">
                                              <div class="oppStageContent">
                                                <span><%=opportunity.current_stage.name%></span><br>
                                                <span><%=opportunity.current_stage.probability%> %</span>
                                              </div>
                                              </div>
                                          </div>
                                        </div>
                                        <div class="col-md-8 col-xs-8">
                                          <div class="oppDescription row">
                                                  <a href="/#/opportunities/show/<%= opportunity.id %>" title="<%= opportunity.name %>"><h4 style="height:26px" class="fittext ellipsis" min-font-size="14" max-font-size="22"  text="opportunity.name">
                                                    <span class="fittext" max-font-size="18"  text="opportunity.name"></span>
                                                  </h4></a>

                                          </div>
                                          <div class="oppDetails col-md-12">
                                                  <div class="oppPrice">
                                                    <span><%= opportunity.currency %> <%= opportunity.amount_total | customCurrency:"":",":".":0 %></span>
                                                    <p class="amount-details" ng-show="opportunity.duration_unit!='fixed'">
                                                        <%= opportunity.duration %> × <%= opportunity.amount_per_unit | customCurrency:"":",":".":0 %>/<%= opportunity.duration_unit %>
                                                    </p>
                                                  </div>

                                                  <div class="oppEstDate">
                                                    {{ _("Estimated close date")}}: <%=opportunity.closed_date | date:'MMMM dd, yyyy'%>
                                                  </div>
                                          </div>
                                        </div>

                                  </div>
                                <div class="tagsSection" ng-class="{hidden: opportunity.tags==null}">
                                    <div class="sectionContent">
                                         <a ng-repeat="tag in opportunity.tags" href="/#/search/type:opportunity tags:<%=tag.id%>"> <span draggable  ng-drag="dragTagItem(tag.edgeKey)" class="pull-right task-label task-tag badge ng-scope ng-binding" style="background-color: <%=tag.color%>;color:<%=idealTextColor(tag.color)%>;">  <%= tag.name %></span>
                                         </a>
                                    </div>
                                </div>
                      </div>
                                  <!-- end oppo card-->
                              </div>
                              <div ng-show="blankStateopportunity && !showNewOpp"  class="col-md-12 responsive" data-tablet="span6" data-desktop="span12" style="">
                               <div class="dashboard-stat cards">


                                    <div class="blank_slate_arrow"></div>
                                  <div class="thumbnail blank_slate_body">
                                        <img src="/static/img/opportunities_blank.png" class="img-responsive">
                                          <p class="lead">{{ _('Know which proposals/bids are pending, which you’ve won, and which you’ve lost. Enter notes about the opportunities, attach proposals or contracts to the opportunities, and keep a log of any changes.')}}</p>
                                   </div>
                                 </div>
                               </div>
                               <div class="clearfix"></div>
                              </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-12">
                                <div class="pagination pull-right" ng-hide="isLoading">


                                        <button ng-click="OppPrevPageItems()" id="sample_editable_1_new" class="btn" ng-show="opppagination.prev" style="display: none;">
                                        {{ _('Prev')}}
                                        </button>

                                        <button ng-click="OpplistNextPageItems()" class="btn" ng-show="opppagination.next" style="display: none;">
                                        {{ _('Next')}}
                                        </button>

                                    </div>
                                    <!--h3 class="pagination pull-right" ng-show="isLoading">Loading...</h3-->
                              </div>
                              </div>


                      </div>
                      <div class="tab-pane active" id="tab_1_6" ng-show="selectedTab == 6" style="display: none;">


                         <div class="row cards-container">
                         <div class="btn-group relbutton">
                                <button ng-click="showNewCase=true" ng-hide="showNewCase" id="sample_editable_1_new" class="btn red">
                                {{ _("Add case")}}
                                </button>
                          </div>
                         <div class="col-md-12" ng-show="showNewCase">
                         <div class="relatedNewForm">
                              <div class="showPage col-md-12 newActionsBtn">
                              <span>{{ _("Create Case")}} </span>                              
                              <button class="btn btn-sm  red newAccountBtn pull-right" ng-click="saveCase(casee)">{{ _("Create")}}</button>
                              <button class="btn btn-sm btn-default newAccountBtn pull-right closeBtn" ng-click="hideNewCaseForm()">{{ _("Close")}}</button>
                              <div class="clearfix"></div>
                            </div>
                        <div class="showPage slimForm col-md-12 margin-bottom-15">
                          <div class="row">
                            <div class="col-md-12">
                              <div class="row">
                                <div class="col-md-12">
                                  <form class="form-horizontal ">
                                    <div class="row">
                                      <div class="col-md-12">
                                        <div class="form-group">
                                          <div class="col-md-12">
                                            <input type="text" required id="id_firstname" class="form-control" ng-model="casee.name" placeholder="What’s the subject of this issue? " autofocus>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                   </form>
                                  </div>
                                </div>
                                <div class="row">
                                <div class="col-md-6">
                                  <div class="news-blocks blank-card blank-card-yellow">
                                    <h3>Case Informations</h3>
                                    <div class="row">
                                      <div class="form-group selector-margin">
                                        <label  class="required col-md-3 control-label">{{_("Status")}} </label>
                                        <div class="col-md-9">
                                                 <select class="form-control" ng-model="status_selected" ng-options="stat.status for stat in casesatuses" >
                                                  <option value="">-- {{_("Choose a status")}} --</option>
                                                </select>

                                        </div>
                                      </div>
                                      <div class="form-group selector-margin">
                                            <label  class="required col-md-3 control-label">{{_("Priority")}} </label>

                                            <div class="col-md-9">
                                              <select class="form-control" ng-model="casee.priority">
                                                <option value="">-- {{_("Choose a priority")}} --</option>
                                                <option value="1">1 - Low</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                                <option value="6">6</option>
                                                <option value="7">7</option>
                                                <option value="8">8</option>
                                                <option value="9">9</option>
                                                <option value="10">10 - Critical</option>
                                              </select>

                                            </div>

                                        </div>
                                      <br>
                                    </div>
                                  </div>
                                  <div class="news-blocks blank-card blank-card-bluep">
                                    <h3>{{ _('Custom Fields') }}</h3>
                                    <ul class="list-unstyled contact-infos" >
                                      <li ng-show="showCustomFieldForm">
                                        <div class="row">
                                          <form class="form-inline newLeadForm" role="form">
                                            <div class="form-group sm-group" style="">
                                              <label class="sr-only" for="exampleInputEmail2">Field</label>
                                              <input type="text" class="form-control" id="exampleInputEmail2" ng-model="customfield.field" placeholder="Enter field name">
                                            </div>
                                            <div class="form-group sm-group" style="">
                                              <label class="sr-only" for="exampleInputEmail2">Value</label>
                                              <input type="text" class="form-control" id="exampleInputEmail2" ng-model="customfield.value" placeholder="Enter a value">
                                            </div>
                                            <button type="submit" class="btn blue jfk-button jfk-button-action" ng-click="pushElement(customfield,customfields)">Add</button>
                                            <button type="submit" class="btn btn-default" ng-click="showCustomFieldForm=false">X</button>
                                          </form>
                                        </div>
                                      </li>
                                      <li ng-repeat="custom in customfields">
                                        <span>
                                          <%= custom.field%>  : <%= custom.value%>
                                        </span>
                                      </li>
                                      <li>
                                        <a ng-click="showCustomFieldForm=true" ng-hide="showCustomFieldForm"class="btn-link addAnotherPhone" data-toggle="modal">
                                          <i class="icon-plus"></i> Add a new custom field
                                        </a>
                                      </li>
                                    </ul>
                                  </div>

                                </div>
                                <div class="col-md-6">
                                  <div class="news-blocks blank-card blank-card-red">
                                    <h3>Description</h3>
                                    <div class="news-block-tags">

                                        <div class="form-group row">
                                            <div class="col-md-12">
                                                <textarea id="noteBody" class="form-control ng-pristine ng-valid" rows="3" ng-model="casee.description"></textarea>
                                            </div>
                                      </div>
                                    </div>

                                  </div>

                                </div>
                              </div>
                            </div>
                            </div>
                        </div>
                          </div>
                        </div>
                          <div class="col-md-12">
                            <div class="row">
                            <div class="col-md-12 waterfall4 waterfallDiv" ng-hide="showNewCase">
                             <!-- ngRepeat: casee in cases -->
                             <div  class="cardElement caseRelatedCard" ng-repeat="casee in cases" >
                              <div class="content" style="background-color:  <%=priorityColor(casee.priority)%>;color:<%=idealTextColor(priorityColor(casee.priority))%>;">
                                    <div class="btn-group inCardOptionsBtn">
                                      <button class="btn btn-default btn-xs dropdown-toggle" style="background-color:  <%=priorityColor(casee.priority)%>;color:<%=idealTextColor(priorityColor(casee.priority))%>;" type="button" data-toggle="dropdown">
                                       <i class="fa fa-ellipsis-vertical" style="color:<%=idealTextColor(priorityColor(casee.priority))%>;"></i>
                                      </button>
                                      <ul class="dropdown-menu drp-dwn-right " role="menu">
                                        <li>
                                         <a href="" ng-click="showAssigneeTags(casee)">
                                             <i class='fa fa-tags'></i> Add tags </a>
                                        </li>
                                        <li>
                                         <a href="" ng-click="editbeforedelete(casee,'case')">
                                             <i class='fa fa-trash-o'></i> Delete </a>
                                        </li>
                                      </ul>
                                    </div>
                                     <div class="detailsSection">
                                      <div class="head">
                                        <div class="text">
                                          <div class="name">
                                              <a href="/#/cases/show/<%= casee.id %>"  class="profile-link" style="color:<%=idealTextColor(priorityColor(casee.priority))%>;">
                                                 <%=casee.name%>
                                              </a>
                                          </div>
                                          <div class="pitch">
                                            <span>
                                                <%=fromNow(casee.updated_at)%>
                                            </span>
                                            <span ng-show="casee.status" class="contact-title" >
                                              Status:
                                              <a class="desc status" href="/#/search/type:Case <%=casee.status%>">
                                                <%=casee.status%>
                                              </a>
                                            </span>
                                            <span ng-show="casee.priority">
                                              <a  class="desc priority pull-right" href="/#/search/type:Case <%=casee.priority%>" style="color:<%=idealTextColor(priorityColor(casee.priority))%>;">
                                                <%=casee.priority%>
                                              </a>
                                            </span>
                                          </div>
                                        </div>
                                        <div class="clearfix"></div>
                                      </div>
                                    </div>
                              </div>
                              </div>
                              </div>
                                    <div ng-show="blankStatecase&&!showNewCase"  class="col-md-12 responsive" data-tablet="span6" data-desktop="span12" style="">
                                        <div class="dashboard-stat cards">


                                              <div class="blank_slate_arrow"></div>
                                            <div class="thumbnail blank_slate_body">
                                                <img src="/static/img/cases_blank.png" class="img-responsive">
                                              <p class="lead">The main goal of cases is to assist collaboration and focus of teams on delivering amazing customer experience.</p>
                                                 </div>


                                        </div>
                                      </div>
                                <div class="clearfix"></div>
                              </div>
                              </div>
                            </div>
                             <div class="row">
                             <div class="col-md-12">
                                <div class="pagination pull-right" ng-hide="isLoading">


                                        <button ng-click="CasePrevPageItems()" id="sample_editable_1_new" class="btn" ng-show="casepagination.prev" style="display: none;">
                                        {{ _('Prev')}}
                                        </button>

                                        <button ng-click="CaselistNextPageItems()" class="btn" ng-show="casepagination.next" style="display: none;">
                                        {{ _('Next')}}
                                        </button>

                                    </div>
                                    <!--h3 class="pagination pull-right" ng-show="isLoading">Loading...</h3-->
                              </div>
                              </div>

                </div>
                <!-- $ documents tab -->
                <div class="tab-pane active" id="tab_1_7" ng-show="selectedTab == 7" style="display: none;">

                         <div class="row cards-container iodrive">

                         <div class="btn-group relbutton">

                                <div class="btn-group">
                                    <a class="btn red" href="#" data-toggle="dropdown">
                                     {{ _('Create')}}
                                    <i class="icon-angle-down"></i>
                                    </a>
                                    <ul class="dropdown-menu">
                                      <li><a ng-click="showCreateDocument('document')" href="#" data-toggle="modal">
                                           <img src="/static/img/google_drive/text/plain.png" class="">
                                          {{ _('Document')}}
                                          </a>
                                      </li>
                                      <li><a ng-click="showCreateDocument('presentation')" href="#" data-toggle="modal">
                                           <img src="/static/img/google_drive/presentation.png" class="">
                                          {{ _('Presentation')}}
                                          </a>
                                      </li>
                                      <li><a ng-click="showCreateDocument('spreadsheet')" href="#" data-toggle="modal">
                                           <img src="/static/img/google_drive/spreadsheet.png" class="">
                                          {{ _('Spreadsheet')}}
                                          </a>
                                      </li>

                                    </ul>
                                </div>
                                <div class="btn-group">
                                    <button ng-click="createPickerUploader()" id="sample_editable_1_new" class="btn red">
                                    <i class="icon-upload-alt"></i>
                                    </button>

                                </div>
                          </div>
                          <div class="col-md-12">
                            <div class="row">
                             <!-- ngRepeat: attachment in documents -->
                                   <div class="col-md-12 waterfall2" ng-hide="blankStatdocuments">
                                      <div ng-repeat="attachment in documents"  class="cardElement"  >
                                          <div class="detailsSection">
                                            <div class="head">
                                              <div class="pic">
                                                  <a href="/#/documents/show/<%= attachment.id %>" class="startup-link" title="attachment.title">
                                                  <img  alt="attachment.title" class="google-drive-icon img-responsive img-thumbnail" ng-src="/static/img/google_drive/<%=attachment.mimeType%>.png" >
                                                  </a>
                                              </div>
                                              <div class="text">
                                                  <div class="name"><a href="/#/documents/show/<%= attachment.id %>"title="<%=attachment.title%>" class="profile-link" ><span><%=attachment.title%></span></a></div>
                                                   <div class="pitch">
                                                      <span  ng-show="contact.account_type">
                                                        <a href="/#/search/type:contact <%=contact.title%>"> #<%= contact.title %></a>
                                                      </span>
                                                    </div>
                                              </div>
                                              <div class="clearfix"></div>
                                            </div>
                                          </div>
                                       </div>
                                   <!--blank stat-->
                                  <div class="clearfix"></div>
                              </div><!--/inner-cards-container-->
                               <div ng-show="blankStatdocuments" class="col-md-12 responsive" data-tablet="span6" data-desktop="span12">
                                       <div class="dashboard-stat cards">
                                           <div class="blank_slate_arrow"></div>
                                           <div class=" thumbnail blank_slate_body">
                                              <img src="/static/img/documents_blanks.png" class="img-responsive">
                                                <p class="lead">{{ _('Manage easily your documments using Google drive')}}</p>
                                           </div>
                                       </div>
                                   </div>
                              </div>

                              </div>

                            </div>

                      </div>
                <!-- $ send email tab -->
               <div class="tab-pane active" id="tab_1_4" ng-show="selectedTab == 8">

                         <div class="showPage">
                           <div class="row">
                             <div class="col-md-12  margin-bottom-10">
                          <p class⁼"lead"=""><strong>{{ _('Send an Email to :')}}</strong> </p>
                          <form  class="ng-pristine ng-valid">
                                            <div class="form-group">
                                            <input required class="form-control ng-pristine ng-valid" autofocus type="text" placeholder="{{ _('To')}}" id="messageSubject" ng-model="email.to">
                                            </div>
                                            <div class="form-group">
                                            <input class="form-control ng-pristine ng-valid" autofocus type="text" placeholder="{{ _('CC')}}" id="messageSubject" ng-model="email.cc">
                                            </div>
                                            <div class="form-group">
                                            <input class="form-control ng-pristine ng-valid" autofocus type="text" placeholder="{{ _('BCC')}}" id="messageSubject" ng-model="email.bcc">
                                            </div>
                                            <div class="form-group">
                                             <input  required class="form-control ng-pristine ng-valid" autofocus type="text" placeholder="{{ _('Add a subject')}}" id="messageSubject" ng-model="email.subject">
                                             </div>
                                            <div class="form-group">
                                            <textarea id="some-textarea" placeholder="{{ _('Enter text ...')}}" id="noteBody" class="form-control ng-pristine ng-valid" rows="7" ng-model="email.body"></textarea>
                                             </div>

                                         <div class="pull-right">

                                            <input   ng-click="sendEmail(email)" ng-disabled="isLoading" type="submit" class="btn green" value="{{_('Send')}}">


                                          </div>
                            </form>
                          </div>
                        </div>
                      </div>
                  </div>
                    <!-- $ linkedin profile -->
                                <div class="tab-pane active" id="tab_1_9" ng-if="(selectedTab == 9)">
                                    <div class="row slimform">
                                      <div class="col-md-6">
                                      <div class="news-blocks blank-card blank-card-yellow newsCard" ng-show="linkedProfile.headline||linkedProfile.locality||linkedProfile.industry||linkedProfile.relation">
                                                <h3>Contact Informations from Linkedin</h3>
                                                <div class="news-block-tags">
                                                    <strong>profission</strong>
                                                </div>
                                                <ul class="list-unstyled contact-infos">
                                                    <li>
                                                        <%=linkedProfile.headline%>
                                                    </li>
                                                </ul> 
                                                <div class="news-block-tags">
                                                    <strong>Locality</strong>
                                                </div>
                                                <ul class="list-unstyled contact-infos">
                                                    <li>
                                                        <%=linkedProfile.locality%>
                                                    </li>
                                                </ul>
                                                <div class="news-block-tags">
                                                    <strong>industry</strong>
                                                </div>
                                                  <ul class="list-unstyled contact-infos">
                                                    <li>
                                                        <%=linkedProfile.industry%>
                                                    </li>
                                                </ul>
                                                <div class="news-block-tags">
                                                    <strong>Relation</strong>
                                                </div>
                                                  <ul class="list-unstyled contact-infos">
                                                    <li>
                                                        <%=linkedProfile.relation%>
                                                    </li>
                                                </ul>
                    
                                            </div>
                                            <div class="news-blocks blank-card blank-card-bluep newsCard" ng-show="linkedProfile.current_post || linkedProfile.past_post">
                                                <h3>Overview</h3>
                                                <div class="news-block-tags" ng-show="linkedProfile.current_post">
                                                    <strong>Current position</strong>
                                                </div>
                                                <ul class="list-unstyled contact-infos">
                                                    <li ng-repeat="post in linkedProfile.current_post">
                                                      - <%=post%>   
                                                    </li>
                                                </ul> 
                                                <div class="news-block-tags" ng-show="linkedProfile.past_post">
                                                    <strong>Past position</strong>
                                                </div>
                                                <ul class="list-unstyled contact-infos">
                                                    <li ng-repeat="post in linkedProfile.past_post">
                                                      - <%=post%>   
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="news-blocks blank-card blank-card-yellow newsCard" ng-hide="isEmpty(linkedProfile.experiences)">
                                                <h3>Experiences</h3>
                                                <div class="news-block-tags" ng-show="linkedProfile.experiences.current_exprience">
                                                    <strong>current experiences</strong>
                                                </div>
                                               
                                                <ul class="list-unstyled contact-infos">
                                                    <li ng-repeat="exp in linkedProfile.experiences.current_exprience">
                                                      - <%=exp.title%>  ,  <%=exp.organisation%> 
                                                    </li>
                                                </ul> 
                                            
                                            <div class="news-block-tags" ng-show="linkedProfile.experiences.past_exprience">
                                                    <strong>past experiences</strong>
                                                </div>
                                                <ul class="list-unstyled contact-infos">
                                                    <li ng-repeat="exp in linkedProfile.experiences.past_exprience" >
                                                      - <%=exp.title%>  ,  <%=exp.organisation%> 
                                                    </li>
                                                </ul>
                                            </div>
                                          </div>
                                          <div class="col-md-6">
                                            <div class="news-blocks blank-card blank-card-yellow newsCard" ng-show="twitterProfile.description_of_user">
                                                <h3>General Informations from Twitter</h3>
                                                <img class="google-avatar pull-right" src="<%=twitterProfile.profile_image_url_https%>"/>
                                                <div class="news-block-tags"ng-show="twitterProfile.description_of_user">
                                                    <strong>Description of user</strong>
                                                </div>
                                                <ul class="list-unstyled contact-infos">
                                                
                                                    <li>
                                                        <%=twitterProfile.description_of_user%>
                                                    </li>
                                    

                                                </ul>
                                               
                                                <div class="news-block-tags">
                                                    <strong>Twitter Link</strong>
                                                </div>
                                                <ul class="list-unstyled contact-infos">
                                                    <li>
                                                      <a href="https://twitter.com/<%=twitterProfile.screen_name%>">
                                                        <i class="fa fa-twitter"></i>@<%=twitterProfile.screen_name%>
                                                      </a>
                                                    </li>
                                                </ul> 
                                                <div class="news-block-tags">
                                                    <strong>Location</strong>
                                                </div>
                                                <ul class="list-unstyled contact-infos">
                                                    <li>
                                                        <%=twitterProfile.location%>
                                                    </li>
                                                </ul>
                                                <div class="news-block-tags">
                                                    <strong>Language</strong>
                                                </div>
                                                <ul class="list-unstyled contact-infos">
                                                    <li>
                                                        <%=twitterProfile.lang%>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="news-blocks blank-card blank-card-red newsCard" ng-show="witterProfile.nbr_tweets||twitterProfile.followers_count||twitterProfile.friends_count">
                                                <h3>Stats from Twitter</h3>
                                                <div class="news-block-tags">
                                                    <strong>Number of Tweets</strong>
                                                </div>
                                                <ul class="list-unstyled contact-infos">
                                                    <li>
                                                        <%=twitterProfile.nbr_tweets%>
                                                    </li>
                                                </ul>
                                                <div class="news-block-tags">
                                                    <strong>Number of followers</strong>
                                                </div>
                                                <ul class="list-unstyled contact-infos">
                                                <li>
                                                        <%=twitterProfile.followers_count%>
                                                </li>
                                                </ul>
                                                <div class="news-block-tags">
                                                    <strong>Number of friends</strong>
                                                </div>
                                                <ul class="list-unstyled contact-infos">
                                                    <li>
                                                        <%=twitterProfile.friends_count%>
                                                    </li>
                                                </ul> 
                                            </div>
                                             <div class="news-blocks blank-card blank-card-red newsCard" ng-show="twitterProfile.last_tweet_text||twitterProfile.last_tweet_retweet_count||twitterProfile.last_tweet_favorite_count">
                                                <h3> Tweets</h3>
                                                <div class="news-block-tags">
                                                    <strong>Last Tweet:</strong>
                                                </div>
                                                <ul class="list-unstyled contact-infos">
                                                    <li>
                                                        Text:
                                                        <br/>
                                                        <%=twitterProfile.last_tweet_text%>
                                                    </li>
                                                </ul>
                                                <ul  class="list-unstyled contact-infos" >
                                                    Number of retweets:
                                                    <br/>
                                                        <%=twitterProfile.last_tweet_retweet_count%>
                                                    <br/>
                                                    Number of favorites:
                                                    <br/>
                                                <%=twitterProfile.last_tweet_favorite_count%>
                                                    
                                                </ul>
                                                
                                                
                                            </div>

                                        
                                               <div class="news-blocks blank-card blank-card-red newsCard"  ng-show="linkedProfile.resume">
                                                    <h3>Summary</h3>
                                                    <div class="news-block-tags">

                                                        <div class="form-group row">
                                                            <label style="margin:10px;"><%=linkedProfile.resume%></label>
                                                          
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="news-blocks blank-card blank-card-yellow newsCard" ng-show="linkedProfile.skills">
                                                    <h3>Skills</h3>
                                                   
                                                    <ul class="list-unstyled contact-infos">
                                                    <li ng-repeat="skill in linkedProfile.skills">
                                                      - <%=skill%>   
                                                    </li>
                                                    </ul>
                                                </div> 
                                                <div class="news-blocks blank-card blank-card-yellow newsCard" ng-show="linkedProfile.formations">
                                                    <h3>education</h3>
                                                   
                                                    <ul class="list-unstyled contact-infos">
                                                    <li ng-repeat="formation in linkedProfile.formations">
                                                      - <%=formation%>   
                                                    </li>
                                                    </ul>
                                                </div>
                                                </div>
                                    </div>
                                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- tasks cards -->
    <!-- tasks cards -->
<div class="col-md-3 tasks-col">
  <div class="row">
    <div class="col-md-12">
         <div class="portlet showPage rightCardContent">
                <div class="portlet-title line">
                  <div class="caption"> <i class="fa fa-check"></i>{{ _('Tasks')}} </div>

                </div>
                <div class="newContactform portlet-body" id="chats">
                   <ul id="tasks" class="list-unstyled lead_related_events" ng-hide="newEventform">
                      <li ng-repeat="task in tasks" id="event_<%=$index%>" class="relatedEventItem" ng-mouseenter="showDeleteBtn = true" ng-mouseleave="showDeleteBtn = false">
                        <div class="event-container">
                          <div class="showDescription">
                            <span class="relatedEventTitle">
                               <a href="/#/tasks/show/<%=task.id%>" class="discussion-content">
                                 <%= task.title%>
                               </a>
                            </span>
                            <a class="pull-right relatedEventMoreBtn">
                              <i class="fa fa-chevron-right" ng-hide="showDetails" ng-click="showDetails=true"></i>
                              <i class="fa fa-chevron-down" ng-show="showDetails" ng-click="showDetails=false"></i>
                            </a>
                            <a class="pull-left relatedEventDeleteBtn" ng-show="showDeleteBtn" ng-click="deleteTask(task)">
                              <i class="fa fa fa-times-circle"></i>
                            </a>
                            <span class="relatedEventStartsAt pull-right" ng-hide="showDetails" ng-show="task.due" title="<%= task.due| date:'yyyy-MM-dd '%>">
                                  <%= task.due | date:'dd MMM'%>
                            </span>
                          </div>
                          <div class="moreDetails row" ng-show="showDetails">
                          <!--  <div class="col-md-6 col-xs-6 event-schedule">
                                <span class=""><i class="fa fa-calendar"></i>
                                 <%= task.due | date:'dd MMM'%> </span>
                            </div>
                            <div class="col-md-6 col-xs-6 event-schedule">
                               <span class="">
                                  <i class="fa fa-bell-o"></i>
                                  <%= task.reminder | date:'dd MMM'%>
                                </span>
                            </div>
                            <div class="col-md-12">
                               <span class="">
                                  <i class="fa fa-map-marker"></i>
                                  <%= event.where %>-->
                                <!--</span>
                            </div>-->
                          </div>
                        </div>
                      </li>
                  </ul>
                  <form class=" slimForm ng-pristine ng-invalid ng-invalid-required">
                      <div class="formElements newTaskToLead" ng-show="newTaskform">
                                <div class="row">
                                  <div class="col-md-12 margin-bottom-10">
                                      <input ng-model="newTask.title" type="text" id="taskName" class="form-control" placeholder="{{ _('Tilte')}}">
                                  </div>
                                  <!--/span-->
                                </div>
                                <div class="row">
                                    <div class="col-md-12 margin-bottom-10">
                                      <div class="input-icon ">
                                        <i class="fa fa-calendar"></i>
                                          <input cusdatetimepicker data-model="newTask.due" type="text" class="form-control" placeholder="{{ _('Add a due date')}}" value="" id="leadEventStartsAt">
                                      </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class='assigneeMemberToTask' >
                                            <div class="input-icon ">
                                              <i class="fa fa-user"></i>
                                              <input type="text" ng-model="user" typeahead="user as user.google_display_name + ' <' + user.email + '>' for user in users | filter:$viewValue | limitTo:8" typeahead-on-select="selectMemberToTask()" class="form-control" placeholder="{{ _('Enter name or email addresse to add people to this group')}}">
                                            </div>
                                            <div id="assigeeList" class="list-group" ng-hide="selected_members == []">
                                                <div ng-show="true" class="invitation list-group-item" ng-repeat="selected_us in selected_members">
                                                    <button type="button" class="close" ng-click="unselectMember($index)" data-dismiss="alert"></button>
                                                    <img class="google-avatar" src="<%= selected_us.google_public_profile_photo_url%>"/>
                                                    <strong> <%= selected_us.google_display_name %></strong>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                      </div>
                      <div class="row">
                          <div class="col-md-12 margin-top-10">
                              <p><span ng-hide="newTaskform">{{ _('Add New Task')}}</span><button type="button" ng-click="addTask(newTask)" class="btn blue btn-sm pull-right btn-inline">{{ _('Add')}}</button><button type="button" ng-click="closeTaskForm(newTask)" ng-show="newTaskform" class="cancelEventBtn btn btn-default btn-sm pull-right btn-inline">{{ _('Cancel')}}</button></p>

                          </div>
                      </div>
                  </form>
                </div>
              </div>
    </div>
  </div>
      <!-- $ Events -->
      <div class="row">
      <div class="col-md-12">
          <div class="portlet showPage rightCardContent">
                <div class="portlet-title line">
                  <div class="caption"> <i class="fa fa-calendar"></i>{{ _('Events')}} </div>

                </div>
                <div class="newContactform portlet-body" id="chats">
                   <ul id="tasks" class="list-unstyled lead_related_events" ng-hide="newEventform">
                      <li ng-repeat="event in events" id="event_<%=$index%>" class="relatedEventItem" ng-mouseenter="showDeleteBtn = true" ng-mouseleave="showDeleteBtn = false">
                        <div class="event-container">
                          <div class="showDescription">
                            <span class="relatedEventTitle">
                              <a href="/#/events/show/<%=event.id%>" class="">
                                <%= event.title%>
                              </a>
                            </span>
                            <a class="pull-right relatedEventMoreBtn">
                              <i class="fa fa-chevron-right" ng-hide="showDetails" ng-click="showDetails=true"></i>
                              <i class="fa fa-chevron-down" ng-show="showDetails" ng-click="showDetails=false"></i>
                            </a>
                            <a class="pull-left relatedEventDeleteBtn" ng-show="showDeleteBtn" ng-click="deleteEvent(event)">
                              <i class="fa fa fa-times-circle"></i>
                            </a>
                            <span class="relatedEventStartsAt pull-right" ng-hide="showDetails" ng-show="event.starts_at" title="<%= event.starts_at | date:'yyyy-MM-dd '%>">
                                  <%= event.starts_at | date:'dd MMM'%>
                            </span>
                          </div>
                          <div class="moreDetails row" ng-show="showDetails">
                            <div class="col-md-5 col-xs-5 event-schedule">
                                <span class=""><i class="fa fa-calendar"></i>
                                <%= event.starts_at | date:'dd MMM'%> </span>
                            </div>
                            <div class="col-md-2 col-xs-2 event-schedule">
                                <i class="fa fa-chevron-right"></i>
                            </div>
                            <div class="col-md-5 col-xs-5 event-schedule">
                               <span class="">
                                  <i class="fa fa-calendar"></i>
                                  <%= event.ends_at | date:'dd MMM'%>
                                </span>
                            </div>
                            <div class="col-md-12">
                               <span class="">
                                  <i class="fa fa-map-marker"></i>
                                  <%= event.where %>
                                </span>
                            </div>
                          </div>
                        </div>
                      </li>
                  </ul>
                  <form class=" slimForm ng-pristine ng-invalid ng-invalid-required">
                  <div class="formElements newEventToLead" ng-show="newEventform">
                            <div class="row">
                              <div class="col-md-12 margin-bottom-10">
                                  <input ng-model="ioevent.title" type="text" id="taskName" class="form-control" placeholder="{{ _('Event tilte')}}">
                              </div>
                              <!--/span-->
                            </div>
                            {{ _('EAll day')}} <input type="checkbox" ng-model="allday"/>
                              <!-- pick only date (the case of all day) -->
                              <div class="row" ng-show="allday">
                                <div class="col-md-12 margin-bottom-10">
                                       <div class="input-icon ">
                                        <i class="fa fa-calendar"></i>
                                       <input cusdatetimepicker data-model="ioevent.starts_at_allday" type="text" class="form-control" placeholder="{{ _('When?')}}" value="" id="leadEventStartsAt">
                                      </div>
                                </div>
                            </div>
                              <!-- the and of the time picker-->

                            <!-- pick date and time    . hadji hicham 14-07-2014-->
                            <div class="row" ng-hide="allday">
                                <div class="col-md-12 margin-bottom-10">
                                      <div class="input-icon">
                                        <i class="fa fa-calendar"></i>
                                        <input cusdatetimepicker data-model="ioevent.starts_at" type="text" class="form-control" placeholder="{{ _('From')}}" value="" id="leadEventStartsAt">
                                      </div>

                                </div>
                            </div>
                            <div class="row" ng-hide="allday">
                                <div class="col-md-12 margin-bottom-10">
                                       <div class="input-icon ">
                                        <i class="fa fa-calendar"></i>
                                       <input cusdatetimepicker data-model="ioevent.ends_at" type="text" class="form-control" placeholder="{{ _('To')}}" value="" id="leadEventStartsAt">
                                      </div>
                                </div>
                            </div>
                            <!-- end date time picker -->

                            <div class="row">
                              <div class="col-md-12 margin-bottom-10">
                                  <input ng-model="ioevent.where" type="text" id="taskName" class="form-control" placeholder="{{ _('Where ?')}}">
                              </div>
                              <!--/span-->
                            </div>
                  </div>
                  <div class="row">
                      <div class="col-md-12 margin-top-10">
                          <p class="newEventText"><span ng-hide="newEventform">{{ _('Add New Event')}}</span>
                          <button type="button" ng-click="addEvent(ioevent)" class="btn red btn-sm pull-right btn-inline">{{ _('Add')}}</button>
                          <button type="button" ng-click="closeEventForm(ioevent)" ng-show="newEventform" class="cancelEventBtn btn btn-default btn-sm pull-right btn-inline">{{ _('Cancel')}}</button>
                          </p>
                      </div>
                  </div>
              </form>
                </div>
              </div>
        </div>
        <div class="col-md-12">

        </div>
      </div>
      <script type="text/javascript">
          $('.lead_related_events').slimScroll({
                                    height: '160px'
                                });

      </script>
</div>
</div>

            <!--HKA 11.10.2013 Edit Contact -->
             <div id="EditContactModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

              <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">{{_("Edit Contact")}}</h3>
              </div>

              <div class="modal-body">

                 <form id="editAccount" name="editlead"  class="form-horizontal">


                  <div class="form-group">
                                <label  class=" col-md-3 control-label">{{_("Owner")}} </label>
                                <div class="col-md-9">
                                    <select class="form-control" ng-model="ownerSelected" ng-options="user.google_display_name for user in users" >
                                        <option value=""><%=contact.owner.google_display_name%> </option>
                                        <!--option value=""><%=stage_selected.name%></option-->
                                    </select>
                                </div>
                  </div>
                  <div class="form-group">
                        <label  class="required col-md-3 control-label">{{_("First Name")}} </label>

                        <div class="col-md-9">
                          <input type="text" class="form-control" required id="id_firstname" ng-model="contact.firstname">

                        </div>
                    </div>
                    <div class="form-group">
                        <label  class="required col-md-3 control-label">{{_("Last Name")}}</label>

                        <div class="col-md-9">
                          <input type="text" class="form-control"  id="id_type" ng-model="contact.lastname">

                        </div>
                    </div>
                    <div class="form-group">
                        <label  class="required col-md-3 control-label">{{_("Tittle")}} </label>

                        <div class="col-md-9">
                          <input type="text" class="form-control"  required id="id_Title" ng-model="contact.title">

                        </div>
                    </div>
                    <div class="form-group">
                        <label  class="required col-md-3 control-label">{{_("Account")}} </label>

                        <div class="col-md-9">
                          <input type="text"  ng-model="searchAccountQuery" typeahead="result as result.name  for result in accountsResults | filter:$viewValue | limitTo:10" typeahead-on-select="selectAccount()" class="form-control" placeholder="{{ _('Company')}}">

                        </div>
                    </div





              </div>
              <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Close")}}</button>
                <button   ng-click="updatecontact(contact)" class="btn btn-primary addContactNow">{{_("Save")}} </button>
              </div>
               </form>
               </div>
               </div>
              </div>
          <!--HKA 24.12.2013 Modal before Deleting Contact-->
  <div id="BeforedeleteContact" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">{{ _('Delete Contact')}}</h3>
              </div>
              <div class="modal-body">
                 <form id="seletesho" name="deletesho" class="form-horizontal">


                  <p>{{_("Are you sure you want to delete")}} :  <%=contact.firstname%> <%=contact.lastname%>  .</p>
                 </form>
              </div>
              <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>

                <input  ng-click="deleteItem()" type="submit" class="btn red" value="Delete this Contact">
                <!--input ng-show="isLoading" type="submit" class="btn green" value="Loading..." disabled-->
              </div>

               </div>
               </div>
       </div>

      <!--HKA 11.10.2013 Edit Tagline -->
             <div id="EditTagModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog">
              <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">{{_("Edit Contact")}}</h3>
              </div>

              <div class="modal-body">
                 <form id="editTagline" name="editlead" ng-submit="updateTagline(account)" class="form-horizontal">


                  <div class="form-group">
                        <label  class="col-md-3 control-label">{{_("Tagline")}} </label>

                        <div class="col-md-9">
                          <!--textarea rows="2" cols="50"  id="id_tagline" ng-model="account.tagline"/-->
                           <textarea id="noteBody" class="form-control ng-pristine ng-valid" rows="3" ng-model="account.tagline"></textarea>

                        </div>
                    </div>
              </div>
              <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Close")}}</button>
                <button  type="submit" class="btn btn-primary addContactNow">{{_("Save")}} </button>
              </div>
               </form>
               </div>
               </div>
            </div>

  <!--HKA 11.10.2013 Edit Introduction  -->
             <div id="EditIntroModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog">
              <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">{{_("Edit Account")}}</h3>
              </div>

              <div class="modal-body">
                 <form id="editTagline" name="edittag" ng-submit="updateintro(account)" class="form-horizontal">


                  <div class="form-group">
                        <label  class=" col-md-3 control-label">{{_("Introduction")}} </label>

                        <div class="col-md-9">

                           <textarea id="noteBody" class="form-control ng-pristine ng-valid" rows="3" ng-model="account.introduction"></textarea>

                        </div>
                    </div>
              </div>
              <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Close")}}</button>
                <button  type="submit" class="btn btn-primary addContactNow">{{_("Save")}} </button>
              </div>
               </form>
               </div>
               </div>
            </div>

      <!--HKA 18.11.2013 Add Phone Modal -->


    <div id="phonemodal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">{{_("Add Phone")}}</h3>
            </div>
            <div class="modal-body">
                  <form id="addPhone" name="addphone" class="form-horizontal">
                    <div class="form-group">
                        <label  class="col-md-3 control-label">{{_("Type")}} </label>
                        <div class="col-md-9">
                          <!--input type="text" placeholder="{{_('home')}},{{_('work')}},{{_('mobile')}},{{_('other')}} ..." required id="id_name" ng-model="phone.type_number"-->
                          <select ng-model="phone.type_number" class="form-control">
                            <option value="home" selected="selected" >{{_('home')}}</option>
                            <option>{{_('work')}}</option>
                            <option>{{_('mobile')}}</option>
                            <option>{{_('other')}}</option>

                          </select>
                        </div>
                     </div>
                     <div class="form-group">
                        <label  class="required col-md-3 control-label">{{_("Number")}}</label>

                        <div class="col-md-9">
                          <input type="text" class="form-control" id="id_name" ng-model="phone.number">

                        </div>
                     </div>
              </div>
              <div class="modal-footer">
                  <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>

                 <input ng-hide="isLoading" ng-click="addPhone(phone)" ng-disabled="!(phone.number)" type="submit" class="btn green" value="{{_('Add this phone')}}">

                  <input ng-show="isLoading" type="submit" class="btn green" value="{{_('Loading...')}}" disabled>
              </div>
                </form>
            </div>
            </div>
    </div>


 <!--HKA 18.11.2013 Add Email -->

     <div id="emailmodal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">{{_("Add Email")}}</h3>
            </div>
            <div class="modal-body">
                  <form id="addEmail" name="addemail"  class="form-horizontal">
                    <div class="form-group">
                        <label  class="col-md-3 control-label">{{_("Email")}} </label>
                        <div class="col-md-9">
                          <input type="text" placeholder="{{_('Email')}}" required id="id_email" ng-model="emaill.email" ng-pattern="/^[\w\.\_]+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}/"  class="form-control">
                        </div>
                     </div>
              </div>
              <div class="modal-footer">
                  <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>

                  <input ng-hide="isLoading" ng-click="addEmail(emaill)"   ng-disabled="!(emaill.email)"  type="submit" class="btn green" value="Add this email">
                  <input ng-show="isLoading" type="submit" class="btn green" value="Loading..." disabled>
              </div>
                </form>
              </div>
              </div>
        </div>

      <!--HKA 18.11.2013  Addresse Modal  -->

    <div id="addressmodal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">{{_("Add Address")}}</h3>
            </div>
            <div class="modal-body">
                  <form id="addAddress" name="addemail"  class="form-horizontal">
                    <div class="form-group">
                        <label  class="col-md-3 control-label">{{_("Street")}} </label>
                        <div class="col-md-9">
                          <input type="text"   class="form-control" id="id_street" ng-model="address.street">
                        </div>
                     </div>
                     <div class="form-group">
                        <label  class="col-md-3 control-label">{{_("City")}} </label>
                        <div class="col-md-9">
                          <input type="text"  class="form-control" id="id_city" ng-model="address.city">
                        </div>
                     </div>
                     <div class="form-group">
                        <label  class="col-md-3 control-label">{{_("State/Province")}} </label>
                        <div class="col-md-9">
                          <input type="text" class="form-control" id="id_state" ng-model="address.state">
                        </div>
                     </div>
                     <div class="form-group">
                        <label  class="col-md-3 control-label">{{_("Postal Code")}} </label>
                        <div class="col-md-9">
                          <input type="text"  class="form-control" id="id_postal" ng-model="address.postal_code">
                        </div>
                     </div>
                     <div class="form-group">
                        <label  class="col-md-3 control-label">{{_("Country")}} </label>
                        <div class="col-md-9">
                          <input type="text"  class="form-control" id="id_country" placeholder="Required" ng-model="address.country">
                        </div>
                     </div>
              </div>
              <div class="modal-footer">
                  <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>

                  <input ng-hide="isLoading" ng-click="addAddress(address)" ng-disabled="(!address.country)" type="submit" class="btn green" value="{{_('Add this address')}}">
                  <input ng-show="isLoading" type="submit" class="btn green" value="{{_('Loading...')}}" disabled>
              </div>
                </form>
            </div>
            </div>
        </div>


     <div id="customfields" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">{{_("Add Website")}}</h3>
            </div>
            <div class="modal-body">
                  <form id="addWebsite" name="addwebsite"  class="form-horizontal">
                    <div class="form-group">
                        <label  class="col-md-3 control-label">{{_("Custom Field")}} </label>
                        <div class="col-md-9">
                          <div class="form-group">
                               <input type="text" class="form-control" placeholder="{{ _('Field')}}"  ng-model="customField.field">
                          </div>
                          <div class="form-group">
                               <input type="text" class="form-control" placeholder="{{ _('Value')}}"  ng-model="customField.value">
                          </div>
                        </div>
                     </div>
              </div>
              <div class="modal-footer">
                  <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>

                  <input ng-hide="isLoading" ng-click="addCustomField(customField)" ng-disabled="!(customField.field && customField.value)" type="submit" class="btn green" value="{{_('Add this custom field')}}">
                  <input ng-show="isLoading" type="submit" class="btn green" value="{{_('Loading...')}}" disabled>
              </div>
                </form>
                </div>
                </div>
        </div>
    <!--HKA 18.11.2013 Website Modal -->


    <div id="websitemodal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">{{_("Add Website")}}</h3>
            </div>
            <div class="modal-body">
                  <form id="addWebsite" name="addwebsite"  class="form-horizontal">
                    <div class="form-group">
                        <label  class="col-md-3 control-label">{{_("Website")}} </label>
                        <div class="col-md-9">
                          <input type="text" class="form-control" placeholder="{{ _('Website')}}" required id="id_website" ng-model="website.website" >
                        </div>
                     </div>
              </div>
              <div class="modal-footer">
                  <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>

                  <input ng-hide="isLoading" ng-click="addWebsite(website)" ng-disabled="!(website.website)" type="submit"  class="btn green" value="{{_('Add this Website')}}">
                  <input ng-show="isLoading" type="submit" class="btn green" value="{{_('Loading...')}}" disabled>
              </div>
                </form>
                </div>
                </div>
        </div>

    <!--HKA 18.11.2013 Social modal -->


    <div id="socialmodal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">{{_("Add Social link")}}</h3>
            </div>
             <div class="modal-body">
                  <form id="addSocial" name="addsocial"  class="form-horizontal">
                    <div class="form-group">
                        <label  class="col-md-3 control-label">{{_("Social link")}} </label>
                        <div class="col-md-9">
                          <input type="text" placeholder="{{_('Social link')}}"  required id="id_social" ng-model="social.sociallink" class="form-control" >
                        </div>
                     </div>
              </div>
              <div class="modal-footer">
                  <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>

                  <input ng-hide="isLoading" ng-click="addSocial(social)" ng-disabled="!(social.sociallink)" type="submit" class="btn green" value="{{ _('Add this social link') }}">
                  <input ng-show="isLoading" type="submit" class="btn green" value="{{ _('Loading...') }}" disabled>
              </div>
                </form>
                </div>
                </div>
        </div>

    </div>
      <!-- END PAGE CONTAINER-->
</div>
 <!--HKA 18.11.2013 Add Contact modal -->

                    <div id="addContactModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                          <h3 id="myModalLabel" class="modal-title">{{_("New Contact")}}</h3>
                        </div>
                        <div class="modal-body">
                            <form id="addContact" name="addcontact"   class="form-horizontal" role="form">
                            <div class="form-group">
                              <label  class="required col-md-3 control-label">{{_("First Name")}} </label>

                              <div class="col-md-9">
                              <input class="form-control" type="text" required id="id_firstname" ng-model="contact.firstname">

                               </div>
                            </div>
                           <div class="form-group">
                              <label  class="required col-md-3 control-label">{{_("Last Name")}}</label>
                              <div class="col-md-9">
                              <input class="form-control" type="text"  id="id_lastname" ng-model="contact.lastname">

                              </div>
                           </div>
                           <div class="form-group">
                             <label  class="required col-md-3 control-label">{{_("Tittle")}} </label>

                             <div class="col-md-9">
                              <input class="form-control" type="text"  id="id_account" ng-model="contact.title">

                              </div>
                           </div>
              </div>
              <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>
                <button  type="submit" class="btn green addContactNow" ng-click="savecontact(contact)">{{_("Add Contact")}}</button>
              </div>
               </form>
             </div>
           </div>
       </div>


<div id="sharingSettingsModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
           <div class="modal-dialog">
              <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">{{_("Sharing Settings")}}</h3>
              </div>
              <div class="modal-body">

                 <form id="addMember" name="addaccount"  class="form-horizontal">



                    <p>{{ _("Who has access:") }}</p>
                    <div class="radio-list">

                            <label >
                            <input type="radio" name="optionRadio" value="public" ng-model="contact.access" ng-click="share()"/>
                            {{ _("public: Anyone within your organization can access and find") }}
                            </label>
                            <label >
                            <input type="radio" name="optionRadio"  value="private" ng-model="contact.access" ng-click="share()"/>
                            {{ _("private: only you and your collaborators") }}
                            </label>
                    </div>
                    <hr/>
                    <div class='' id="collaborators">
                    <p>{{ _("Collaborators:") }}</p>
                        <div ng-repeat="collaborator in collaborators_list" class="invitation">
                          <img class="google-avatar" ng-src="<%=collaborator.img%>"/>
                           <%=collaborator.display_name%> < <%=collaborator.email%> >
                        </div>

                    </div>
                    <hr/>

                    <div class=''>
                    <p>{{ _("Invited user:") }}</p>
                    <div class="invitation" ng-repeat="invited in sharing_with">
                      <img class="google-avatar" src="<%= invited.google_public_profile_photo_url%>"/>
                        <strong> <%= invited.google_display_name %> < <%=invited.email%> ></strong>
                      <hr/>
                    </div>

                    <p>{{ _("Invite collaborators:") }}</p>
                    <div class="form-group">
                      <input type="text" ng-model="user" typeahead="user as user.google_display_name + ' <' + user.email + '>' for user in users | filter:$viewValue | limitTo:8" typeahead-on-select="selectMember()" class="form-control" placeholder="{{ _('Enter name or email addresse to add people to this group') }}">
                    </div>

                      </div>
              </div>
              <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>
                <button  type="submit" data-dismiss="modal" aria-hidden="true" ng-click="share()" class="btn blue addContactNow">{{_("Share")}}</button>
              </div>
               </form>
               </div>
               </div>

       </div>

<div id="BeforedeleteAccount" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">Delete Account</h3>
              </div>
              <div class="modal-body">
                 <form id="seletesho" name="deletesho" class="form-horizontal">
                  <p>{{_("Are you sure you want to delete")}} :  <%=account.name %> .</p>
              </div>
                <div class="modal-footer">
                  <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>

                  <input  ng-click="deleteaccount()" type="submit" class="btn red" value="Delete this Account">
                  <!--input ng-show="isLoading" type="submit" class="btn green" value="Loading..." disabled-->
                </div>
            </form>
          </div>
        </div>
       </div>
         <!-- BEFORE DELETE MODEL END-->
           <!--HKA 24.12.2013 Modal before Deleting Account-->
          <!-- BEFORE DELETE MODEL-->
         <div id="BeforedeleteInfonode" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">{{ _('Delete Information')}}</h3>
              </div>
              <div class="modal-body">
                 <form id="seletesho" name="deletesho" class="form-horizontal">
                  <p>{{_("Are you sure you want to delete")}} :  <%=account.name %> .</p>
              </div>
                <div class="modal-footer">
                  <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>

                  <input  ng-click="deleteaccount(account)" type="submit" class="btn red" value="Delete this Information">
                  <!--input ng-show="isLoading" type="submit" class="btn green" value="Loading..." disabled-->
                </div>
            </form>
          </div>
        </div>
       </div>

<div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
              <h3 id="myModalLabel" class="modal-title">{{_("Add a new Task")}}</h3>
            </div>
            <div class="modal-body pickerin">
                     <div class="controls controls-row">
                                          <form id="addTask"  class="ng-pristine ng-valid">
                                                  <input class="form-control" autofocus type="text" placeholder="{{ _('Add a new task')}}" id="taskTitle" ng-model="task.title">

                                                  <p><strong>{{_("When's it due?")}}</strong></p>
                                                  <center>
                                                    <datetimepicker data-ng-model="task.due"
                                                    data-datetimepicker-config="{ startView:'day', minView:'day' }" />
                                                  </center>
                  </div>
            </div>
            <div class="modal-footer">


               <input ng-hide="isLoading" type="submit" ng-click="addTask(task)" class="btn green" value="Add this task">




            </form>
            </div>
            </div>
            </div>
          </div>

<div id="newDocument" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
              <h3 id="myModalLabel" class="modal-title">{{_("Create a new")}} <%=mimeType%></h3>
            </div>
            <div class="modal-body">
                     <div class="controls controls-row">
                                          <form id="addTask"  class="ng-pristine ng-valid">
                                                  <input class="form-control" autofocus type="text" placeholder="{{ _('Enter a new')}} <%=mimeType%> {{ _('name')}}" id="taskTitle" ng-model="newdocument.title" required>


                     </div>
            </div>
            <div class="modal-footer">
              <button class="btn" data-dismiss="modal" aria-hidden="true">{{ _('Cancel')}}</button>

               <input ng-hide="isLoading" type="submit" class="btn green" value="Create this document" ng-click="createDocument(newdocument)">
                <input ng-show="isLoading" type="submit" class="btn green" value="Loading..." disabled>

            </form>
            </div>
            </div>
            </div>
          </div>
    <!--End Contact Modal -->

     <!--HKA 19.11.2013 Opportunity Modal -->

              <div id="addOpportunityModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog">
              <div class="modal-content">
                 <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                     <h3 id="myModalLabel" class="modal-title">{{_("New Opportunity")}}</h3>
                  </div>
                 <div class="modal-body">

                     <form id="addOpportunity" name="addOpportunity"  class="form-horizontal">

                     <fieldset>
                      <div class="form-group">
                          <label  class="required col-md-3 control-label">{{_("Name")}} *</label>

                          <div class="col-md-9">
                          <input type="text" class="form-control" required id="id_name" ng-model="opportunity.name">
                          </div>
                      </div>
                      <!--div class="form-group">
                        <label  class="required col-md-3 control-label">{{_("Labels")}} </label>

                        <div class="col-md-9">
                          <input type="text"  class="form-control" id="id_label" ng-model="opportunity.description">
                        </div>
                      </div-->
                    <div class="form-group">
                        <label  class="required col-md-3 control-label">{{_("Amount")}} </label>
              
                              <div class="col-md-4 ">
                                  <input type="text" required id="id_name" class="form-control" placeholder="{{_('Opportunity amount...')}}" ng-model="opportunity.amount_per_unit ">
                               </div>
                              <div class="col-md-4 ">
                               <select  class="form-control" ng-model="opportunity.currency">
                                <option value="USD" selected>$ - USD</option>
                                <option value="EUR">€ - EUR</option>
                                <option value="CAD">$ - CAD</option>
                                <option value="GBP">£ - GBP</option>
                                <option value="AUD">$ - AUD</option>
                                <option value="">---</option>
                                <option value="AED">د.إ - AED</option>
                                <option value="ANG">ƒ - ANG</option>
                                <option value="AOA">AOA - AOA</option>
                                <option value="ARS">$ - ARS</option>
                                <option value="BAM">KM - BAM</option>
                                <option value="BBD">$ - BBD</option>
                                <option value="BGL">лв - BGL</option>
                                <option value="BHD">BD - BHD</option>
                                <option value="BND">$ - BND</option>
                                <option value="BRL">R$ - BRL</option>
                                <option value="BTC">฿ - BTC</option>
                                <option value="CHF">Fr - CHF</option>
                                <option value="CLF">UF - CLF</option>
                                <option value="CLP">$ - CLP</option>
                                <option value="CNY">¥ - CNY</option>
                                <option value="COP">$ - COP</option>
                                <option value="CRC">₡ - CRC</option>
                                <option value="CZK">Kč - CZK</option>
                                <option value="DKK">kr - DKK</option>
                                <option value="EEK">KR - EEK</option>
                                <option value="EGP">E£ - EGP</option>
                                <option value="FJD">FJ$ - FJD</option>
                                <option value="GTQ">Q - GTQ</option>
                                <option value="HKD">$ - HKD</option>
                                <option value="HRK">kn  - HRK</option>
                                <option value="HUF">Ft - HUF</option>
                                <option value="IDR">Rp - IDR</option>
                                <option value="ILS">₪ - ILS</option>
                                <option value="INR">₨ - INR</option>
                                <option value="IRR">ریال - IRR</option>
                                <option value="ISK">kr - ISK</option>
                                <option value="JOD">د.ا - JOD</option>
                                <option value="JPY">¥ - JPY</option>
                                <option value="KES">KSh - KES</option>
                                <option value="KRW">₩ - KRW</option>
                                <option value="KWD">KD - KWD</option>
                                <option value="KYD">$ - KYD</option>
                                <option value="LTL">Lt - LTL</option>
                                <option value="LVL">Ls - LVL</option>
                                <option value="MAD">د.م. - MAD</option>
                                <option value="MVR">Rf - MVR</option>
                                <option value="MXN">$ - MXN</option>
                                <option value="MYR">RM - MYR</option>
                                <option value="NGN">₦ - NGN</option>
                                <option value="NOK">kr - NOK</option>
                                <option value="NZD">$ - NZD</option>
                                <option value="OMR">ر.ع - OMR</option>
                                <option value="PEN">S/. - PEN</option>
                                <option value="PHP">₱ - PHP</option>
                                <option value="PLN">zł - PLN</option>
                                <option value="QAR">ر.ق - QAR</option>
                                <option value="RON">L - RON</option>
                                <option value="RUB">руб. - RUB</option>
                                <option value="SAR">ر.س - SAR</option>
                                <option value="SEK">kr - SEK</option>
                                <option value="SGD">$ - SGD</option>
                                <option value="THB">฿ - THB</option>
                                <option value="TRY">TL - TRY</option>
                                <option value="TTD">$ - TTD</option>
                                <option value="TWD">$ - TWD</option>
                                <option value="UAH">₴ - UAH</option>
                                <option value="VEF">Bs F - VEF</option>
                                <option value="VND">₫ - VND</option>
                                <option value="XCD">$ - XCD</option>
                                <option value="ZAR">R - ZAR</option>
                              </select>
                              </div>
                           
                    </div>
                    <div class="form-group">
                        <label  class="required col-md-3 control-label">{{_("")}} </label>
                         
                                <div class="col-md-4 ">
                                    <select   class="form-control" ng-model="opportunity.duration_unit">
                                        <option value="fixed">{{_('Fixed bid')}}</option>
                                        <option value="hour">{{_('Per hour')}}</option>
                                        <option value="month">{{_('Per month')}}</option>
                                        <option value="year">{{_('Per year')}}</option>
                                    </select>
                                </div>
                                <div class="col-md-4 ">
                                   <input ng-hide="opportunity.duration_unit=='fixed'" type="text" pattern="\d*"  required id="" class="form-control" ng-model="opportunity.duration">
                                </div>
                      
                    </div>
                    

                    <div class="form-group">
                        <label  class="required col-md-3 control-label">{{_("Stage")}} </label>
                        <div class="col-md-9">
                          <select ng-model="stage_selected" class="form-control" ng-options="opps.name + ' - ( ' + opps.probability + '% )' for opps in opportunitystages | orderBy: 'name':true"  >
                            <option value="">-- {{ _('choose Stage')}} --</option>

                          </select>


                        </div>
                    </div>
                    </fieldset>

              </div>
                    <div class="modal-footer">
                     <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>
                      <button  type="submit"  ng-click="saveOpp(opportunity)" class="btn green addContactNow">{{_("Add Opportunity")}}</button>
                     </div>
                   </form>
                   </div>
                   </div>
          </div>

                <!--HKA 19.11.2013 End Of Opportunity Modal -->
                   <!--HKA 19.11.2013 Case Modal -->
    <div id="addCaseModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">{{_("New Case")}}</h3>
              </div>
              <div class="modal-body">

                 <form id="addCase" name="addCase"  class="form-horizontal">




                    <div class="form-group">
                        <label  class="required col-md-3 control-label">{{_("Name")}} </label>

                        <div class="col-md-9">
                          <input type="text" class="form-control"  id="id_name" ng-model="casee.name">

                        </div>
                    </div>
                    <div class="form-group">
                        <label  class="required col-md-3 control-label">{{_("Priority")}} </label>

                        <div class="col-md-9">
                           <select class="form-control" ng-model="casee.priority">
                            <option value="1">1 - {{ _('Low')}}</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10 - {{ _('Critical')}}</option>
                          </select>

                        </div>
                    </div>

                    <div class="form-group">
                        <label  class="required col-md-3 control-label">{{_("Status")}}</label>

                        <div class="col-md-9">
                            <select  class="form-control" ng-model="status_selected" ng-options="stat.status for stat in casesatuses" >
                            <option value="">{{ _('Choose Status')}}</option>
                            <!--option value=""><%=status_selected.status%></option-->
                          </select>

                        </div>

                    </div>
                    <!--div class="form-group">
                        <label  class="required col-md-3 control-label">{{_("Labels")}} </label>

                        <div class="col-md-9">
                          <input type="text" class="form-control"  id="id_description" ng-model="casee.type_case">

                        </div>
                    </div-->




              </div>
              <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>
                <button  type="submit" ng-click="saveCase(casee)" class="btn green addContactNow">{{_("Add Case")}}</button>
              </div>
               </form>
               </div>
               </div>
          </div>

                      <!--HKA 19.11.2013  End Case Modal -->

<!--Event Modal -->
          <div id="newEventModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
              <h3 id="myModalLabel" class="modal-title">{{_("New Event")}}</h3>
            </div>
            <div class="modal-body">
                     <div class="controls controls-row">
                            <form id="addTask"  class="ng-pristine ng-valid">
                                                  <input class="form-control" autofocus type="text" placeholder="{{_('Add a new event')}}" id="taskTitle" ng-model="ioevent.title">
                                                  <p><strong>{{_("When?")}}</strong></p>
                                                <div class="row">
                                                  <div class="col-md-6">
                                                    <p> <strong>{{_("Starts")}}</strong>: <%=ioevent.starts_at | date:'MMMM dd, yyyy, HH:mm'%></p>
                                                        <datetimepicker data-ng-model="ioevent.starts_at"
                                                    data-datetimepicker-config="{ startView:'day', minView:'minute' }" />
                                                  </div>
                                                  <div class="col-md-6">
                                                  <p><strong>{{_("Ends")}}</strong>: <%=ioevent.ends_at | date:'MMMM dd, yyyy, HH:mm'%></p>
                                                        <datetimepicker data-ng-model="ioevent.ends_at"
                                                    data-datetimepicker-config="{ startView:'day', minView:'minute' }" />
                                                  </div>
                                                </div>
                                                    <input class="form-control" autofocus="" type="text" placeholder="{{_('Where?')}}" id="taskTitle" ng-model="ioevent.where">
                                                </div>
                                                </form>
            </div>
            <div class="modal-footer">
              <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>

               <input ng-hide="isLoading" type="submit" class="btn green" value="{{_('Add this event')}}" ng-click="addEvent(ioevent)">
                <input ng-show="isLoading" type="submit" class="btn green" value="{{_('Loading...')}}" disabled>


            </div>
            </div>
            </div>
          </div>

                        <!-- Modal -->
          <div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
              <h3 id="myModalLabel" class="modal-title">{{_("Add a new Task")}}</h3>
            </div>
            <div class="modal-body pickerin">
                     <div class="controls controls-row">
                                          <form id="addTask"  class="ng-pristine ng-valid">
                                                  <input class="form-control" autofocus type="text" placeholder="{{ _('Add a new task')}}" id="taskTitle" ng-model="task.title">

                                                  <p><strong>{{_("When's it due?")}}</strong></p>
                                                  <center>
                                                    <datetimepicker data-ng-model="task.due"
                                                    data-datetimepicker-config="{ startView:'day', minView:'day' }" />
                                                  </center>
                  </div>
            </div>
            <div class="modal-footer">

               <input ng-hide="isLoading" ng-click="addTask(task)" type="submit" class="btn green" value="Add this task">


            </form>
            </div>
            </div>
            </div>
          </div>
          <div id="newDocument" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
              <h3 id="myModalLabel" class="modal-title">{{_("Create a new")}} <%=mimeType%></h3>
            </div>
            <div class="modal-body">
                     <div class="controls controls-row">
                                          <form id="addTask" class="ng-pristine ng-valid">
                                                  <input class="form-control" autofocus type="text" placeholder="{{ _('Enter a new')}} <%=mimeType%> {{ _('name')}}" id="taskTitle" ng-model="newdocument.title" required>


                     </div>
            </div>
            <div class="modal-footer">

               <input ng-hide="isLoading"  ng-click="createDocument(newdocument)" type="submit" class="btn green" value="Create this document">

                <input ng-show="isLoading" type="submit" class="btn green" value="Loading..." disabled>

            </form>
            </div>
            </div>
            </div>
          </div>

<!--Event Modal -->
          <div id="newEventModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
              <h3 id="myModalLabel" class="modal-title">{{_("New Event")}}</h3>
            </div>
            <div class="modal-body">
                     <div class="controls controls-row">
                            <form id="addTask"  class="ng-pristine ng-valid">
                                                  <input class="form-control" autofocus type="text" placeholder="{{_('Add a new event')}}" id="taskTitle" ng-model="ioevent.title">
                                                  <p><strong>{{_("When?")}}</strong></p>
                                                <div class="row">
                                                  <div class="col-md-6">
                                                    <p> <strong>{{_("Starts")}}</strong>: <%=ioevent.starts_at | date:'MMMM dd, yyyy, HH:mm'%></p>
                                                        <datetimepicker data-ng-model="ioevent.starts_at"
                                                    data-datetimepicker-config="{ startView:'day', minView:'minute' }" />
                                                  </div>
                                                  <div class="col-md-6">
                                                  <p><strong>{{_("Ends")}}</strong>: <%=ioevent.ends_at | date:'MMMM dd, yyyy, HH:mm'%></p>
                                                        <datetimepicker data-ng-model="ioevent.ends_at"
                                                    data-datetimepicker-config="{ startView:'day', minView:'minute' }" />
                                                  </div>
                                                </div>
                                                    <input class="form-control" autofocus="" type="text" placeholder="{{_('Where?')}}" id="taskTitle" ng-model="ioevent.where">
                                                </div>
            </div>
            <div class="modal-footer">
              <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>

               <input ng-hide="isLoading" ng-click="addEvent(ioevent)" type="submit" class="btn green" value="{{_('Add this event')}}">

                <input ng-show="isLoading" type="submit" class="btn green" value="{{_('Loading...')}}" disabled>

            </form>
            </div>
            </div>
            </div>
          </div>

<script type="text/javascript">
  $(function() {
    $('#datetimepicker2').datetimepicker({
      language: 'fr',
      pickTime: false
    });
  });
        var originalLeave = $.fn.popover.Constructor.prototype.leave;
      $.fn.popover.Constructor.prototype.leave = function(obj){
        var self = obj instanceof this.constructor ?
          obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type)
        var container, timeout;

        originalLeave.call(this, obj);

        if(obj.currentTarget) {
          container = $(obj.currentTarget).siblings('.popover')
          timeout = self.timeout;
          container.one('mouseenter', function(){
            //We entered the actual popover – call off the dogs
            clearTimeout(timeout);
            //Let's monitor popover content instead
            container.one('mouseleave', function(){
              $.fn.popover.Constructor.prototype.leave.call(self, self);
            });
          })
        }
      };
 /* $('body').popover({ selector: '[data-popover]', trigger: 'click hover', placement: 'left', delay: {show: 50, hide: 400}});*/
          $('#assigeeList').slimScroll({
              height: '200px'
          });
           $('#collaborators').slimScroll({
                                    height: '192px'
                                });
  $('.waterfall').waterfall({
              colMinWidth: 210,
              defaultContainerWidth: 840,
              autoresize: true
          });
  $('.waterfall2').waterfall({
              colMinWidth: 210,
              defaultContainerWidth: 840,
              autoresize: true
          });
  $('.waterfall3').waterfall({
              colMinWidth: 315,
            defaultContainerWidth: 840,
            autoresize: true
          });
  $('.waterfall4').waterfall({
              colMinWidth: 210,
              defaultContainerWidth: 840,
              autoresize: true
          });
  $("#select2_sample2").select2({
                          placeholder: "{{ _('Click to Select a label')}}",
                          allowClear: false
                      });


</script>
